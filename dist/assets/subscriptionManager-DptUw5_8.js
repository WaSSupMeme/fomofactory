import{A as at,z as fe,v as j,D as Ki,E as eo}from"./index-CXk42-88.js";import{r as zs,e as xs,p as Br}from"./index-I5XIHrfH.js";var Fe,M,Gs,qs,pe,zn,Xs,Fr,Gr,Pr,jr,Ws,Oe={},Ys=[],to=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ut=Array.isArray;function le(e,t){for(var r in t)e[r]=t[r];return e}function Qs(e){var t=e.parentNode;t&&t.removeChild(e)}function Mr(e,t,r){var n,s,i,o={};for(i in t)i=="key"?n=t[i]:i=="ref"?s=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?Fe.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return Le(e,o,n,s,null)}function Le(e,t,r,n,s){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++Gs,__i:-1,__u:0};return s==null&&M.vnode!=null&&M.vnode(i),i}function ro(){return{current:null}}function Pe(e){return e.children}function Ae(e,t){this.props=e,this.context=t}function me(e,t){if(t==null)return e.__?me(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?me(e):null}function Zs(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Zs(e)}}function Hr(e){(!e.__d&&(e.__d=!0)&&pe.push(e)&&!it.__r++||zn!==M.debounceRendering)&&((zn=M.debounceRendering)||Xs)(it)}function it(){var e,t,r,n,s,i,o,l;for(pe.sort(Fr);e=pe.shift();)e.__d&&(t=pe.length,n=void 0,i=(s=(r=e).__v).__e,o=[],l=[],r.__P&&((n=le({},s)).__v=s.__v+1,M.vnode&&M.vnode(n),qr(r.__P,n,s,r.__n,r.__P.ownerSVGElement!==void 0,32&s.__u?[i]:null,o,i??me(s),!!(32&s.__u),l),n.__v=s.__v,n.__.__k[n.__i]=n,ri(o,n,l),n.__e!=i&&Zs(n)),pe.length>t&&pe.sort(Fr));it.__r=0}function Ks(e,t,r,n,s,i,o,l,a,c,f){var u,d,h,_,T,v=n&&n.__k||Ys,$=t.length;for(r.__d=a,no(r,t,v),a=r.__d,u=0;u<$;u++)(h=r.__k[u])!=null&&typeof h!="boolean"&&typeof h!="function"&&(d=h.__i===-1?Oe:v[h.__i]||Oe,h.__i=u,qr(e,h,d,s,i,o,l,a,c,f),_=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&Xr(d.ref,null,h),f.push(h.ref,h.__c||_,h)),T==null&&_!=null&&(T=_),65536&h.__u||d.__k===h.__k?(a&&!a.isConnected&&(a=me(d)),a=ei(h,a,e)):typeof h.type=="function"&&h.__d!==void 0?a=h.__d:_&&(a=_.nextSibling),h.__d=void 0,h.__u&=-196609);r.__d=a,r.__e=T}function no(e,t,r){var n,s,i,o,l,a=t.length,c=r.length,f=c,u=0;for(e.__k=[],n=0;n<a;n++)o=n+u,(s=e.__k[n]=(s=t[n])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Le(null,s,null,null,null):ut(s)?Le(Pe,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?Le(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,l=so(s,r,o,f),s.__i=l,i=null,l!==-1&&(f--,(i=r[l])&&(i.__u|=131072)),i==null||i.__v===null?(l==-1&&u--,typeof s.type!="function"&&(s.__u|=65536)):l!==o&&(l===o+1?u++:l>o?f>a-o?u+=l-o:u--:l<o?l==o-1&&(u=l-o):u=0,l!==n+u&&(s.__u|=65536))):(i=r[o])&&i.key==null&&i.__e&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=me(i)),Vr(i,i,!1),r[o]=null,f--);if(f)for(n=0;n<c;n++)(i=r[n])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=me(i)),Vr(i,i))}function ei(e,t,r){var n,s;if(typeof e.type=="function"){for(n=e.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=e,t=ei(n[s],t,r));return t}e.__e!=t&&(r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function ti(e,t){return t=t||[],e==null||typeof e=="boolean"||(ut(e)?e.some(function(r){ti(r,t)}):t.push(e)),t}function so(e,t,r,n){var s=e.key,i=e.type,o=r-1,l=r+1,a=t[r];if(a===null||a&&s==a.key&&i===a.type&&!(131072&a.__u))return r;if(n>(a!=null&&!(131072&a.__u)?1:0))for(;o>=0||l<t.length;){if(o>=0){if((a=t[o])&&!(131072&a.__u)&&s==a.key&&i===a.type)return o;o--}if(l<t.length){if((a=t[l])&&!(131072&a.__u)&&s==a.key&&i===a.type)return l;l++}}return-1}function xn(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||to.test(t)?r:r+"px"}function We(e,t,r,n,s){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||xn(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||xn(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=Gr,e.addEventListener(t,i?jr:Pr,i)):e.removeEventListener(t,i?jr:Pr,i);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,r))}}function Gn(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Gr++;else if(t.t<r.u)return;return r(M.event?M.event(t):t)}}}function qr(e,t,r,n,s,i,o,l,a,c){var f,u,d,h,_,T,v,$,p,b,A,g,L,q,U,H=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(a=!!(32&r.__u),i=[l=t.__e=r.__e]),(f=M.__b)&&f(t);e:if(typeof H=="function")try{if($=t.props,p=(f=H.contextType)&&n[f.__c],b=f?p?p.props.value:f.__:n,r.__c?v=(u=t.__c=r.__c).__=u.__E:("prototype"in H&&H.prototype.render?t.__c=u=new H($,b):(t.__c=u=new Ae($,b),u.constructor=H,u.render=oo),p&&p.sub(u),u.props=$,u.state||(u.state={}),u.context=b,u.__n=n,d=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),H.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=le({},u.__s)),le(u.__s,H.getDerivedStateFromProps($,u.__s))),h=u.props,_=u.state,u.__v=t,d)H.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(H.getDerivedStateFromProps==null&&$!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps($,b),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate($,u.__s,b)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(u.props=$,u.state=u.__s,u.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(x){x&&(x.__=t)}),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate($,u.__s,b),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,_,T)})}if(u.context=b,u.props=$,u.__P=e,u.__e=!1,g=M.__r,L=0,"prototype"in H&&H.prototype.render){for(u.state=u.__s,u.__d=!1,g&&g(t),f=u.render(u.props,u.state,u.context),q=0;q<u._sb.length;q++)u.__h.push(u._sb[q]);u._sb=[]}else do u.__d=!1,g&&g(t),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++L<25);u.state=u.__s,u.getChildContext!=null&&(n=le(le({},n),u.getChildContext())),d||u.getSnapshotBeforeUpdate==null||(T=u.getSnapshotBeforeUpdate(h,_)),Ks(e,ut(U=f!=null&&f.type===Pe&&f.key==null?f.props.children:f)?U:[U],t,r,n,s,i,o,l,a,c),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),v&&(u.__E=u.__=null)}catch(x){t.__v=null,a||i!=null?(t.__e=l,t.__u|=a?160:32,i[i.indexOf(l)]=null):(t.__e=r.__e,t.__k=r.__k),M.__e(x,t,r)}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=io(r.__e,t,r,n,s,i,o,a,c);(f=M.diffed)&&f(t)}function ri(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)Xr(r[n],r[++n],r[++n]);M.__c&&M.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){M.__e(i,s.__v)}})}function io(e,t,r,n,s,i,o,l,a){var c,f,u,d,h,_,T,v=r.props,$=t.props,p=t.type;if(p==="svg"&&(s=!0),i!=null){for(c=0;c<i.length;c++)if((h=i[c])&&"setAttribute"in h==!!p&&(p?h.localName===p:h.nodeType===3)){e=h,i[c]=null;break}}if(e==null){if(p===null)return document.createTextNode($);e=s?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,$.is&&$),i=null,l=!1}if(p===null)v===$||l&&e.data===$||(e.data=$);else{if(i=i&&Fe.call(e.childNodes),v=r.props||Oe,!l&&i!=null)for(v={},c=0;c<e.attributes.length;c++)v[(h=e.attributes[c]).name]=h.value;for(c in v)if(h=v[c],c!="children"){if(c=="dangerouslySetInnerHTML")u=h;else if(c!=="key"&&!(c in $)){if(c=="value"&&"defaultValue"in $||c=="checked"&&"defaultChecked"in $)continue;We(e,c,null,h,s)}}for(c in $)h=$[c],c=="children"?d=h:c=="dangerouslySetInnerHTML"?f=h:c=="value"?_=h:c=="checked"?T=h:c==="key"||l&&typeof h!="function"||v[c]===h||We(e,c,h,v[c],s);if(f)l||u&&(f.__html===u.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(u&&(e.innerHTML=""),Ks(e,ut(d)?d:[d],t,r,n,s&&p!=="foreignObject",i,o,i?i[0]:r.__k&&me(r,0),l,a),i!=null)for(c=i.length;c--;)i[c]!=null&&Qs(i[c]);l||(c="value",_!==void 0&&(_!==e[c]||p==="progress"&&!_||p==="option"&&_!==v[c])&&We(e,c,_,v[c],!1),c="checked",T!==void 0&&T!==e[c]&&We(e,c,T,v[c],!1))}return e}function Xr(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){M.__e(n,r)}}function Vr(e,t,r){var n,s;if(M.unmount&&M.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||Xr(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){M.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&Vr(n[s],t,r||typeof e.type!="function");r||e.__e==null||Qs(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function oo(e,t,r){return this.constructor(e,r)}function ni(e,t,r){var n,s,i,o;M.__&&M.__(e,t),s=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],o=[],qr(t,e=(!n&&r||t).__k=Mr(Pe,null,[e]),s||Oe,Oe,t.ownerSVGElement!==void 0,!n&&r?[r]:s?null:t.firstChild?Fe.call(t.childNodes):null,i,!n&&r?r:s?s.__e:t.firstChild,n,o),ri(i,e,o)}function si(e,t){ni(e,t,si)}function co(e,t,r){var n,s,i,o,l=le({},e.props);for(i in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)i=="key"?n=t[i]:i=="ref"?s=t[i]:l[i]=t[i]===void 0&&o!==void 0?o[i]:t[i];return arguments.length>2&&(l.children=arguments.length>3?Fe.call(arguments,2):r),Le(e.type,l,n||e.key,s||e.ref,null)}function ao(e,t){var r={__c:t="__cC"+Ws++,__:e,Consumer:function(n,s){return n.children(s)},Provider:function(n){var s,i;return this.getChildContext||(s=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&s.some(function(l){l.__e=!0,Hr(l)})},this.sub=function(o){s.push(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){s.splice(s.indexOf(o),1),l&&l.call(o)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}Fe=Ys.slice,M={__e:function(e,t,r,n){for(var s,i,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),o=s.__d),o)return s.__E=s}catch(l){e=l}throw e}},Gs=0,qs=function(e){return e!=null&&e.constructor==null},Ae.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=le({},this.state),typeof e=="function"&&(e=e(le({},r),this.props)),e&&le(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Hr(this))},Ae.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Hr(this))},Ae.prototype.render=Pe,pe=[],Xs=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fr=function(e,t){return e.__v.__b-t.__v.__b},it.__r=0,Gr=0,Pr=Gn(!1),jr=Gn(!0),Ws=0;const uo=Object.freeze(Object.defineProperty({__proto__:null,Component:Ae,Fragment:Pe,cloneElement:co,createContext:ao,createElement:Mr,createRef:ro,h:Mr,hydrate:si,get isValidElement(){return qs},get options(){return M},render:ni,toChildArray:ti},Symbol.toStringTag,{value:"Module"})),Vh=at(uo);var he,F,$r,qn,we=0,ii=[],rt=[],D=M,Xn=D.__b,Wn=D.__r,Yn=D.diffed,Qn=D.__c,Zn=D.unmount,Kn=D.__;function ge(e,t){D.__h&&D.__h(F,e,we||t),we=0;var r=F.__H||(F.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:rt}),r.__[e]}function oi(e){return we=1,ci(ui,e)}function ci(e,t,r){var n=ge(he++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):ui(void 0,t),function(l){var a=n.__N?n.__N[0]:n.__[0],c=n.t(a,l);a!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=F,!F.u)){var s=function(l,a,c){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!i||i.call(this,l,a,c);var u=!1;return f.forEach(function(d){if(d.__N){var h=d.__[0];d.__=d.__N,d.__N=void 0,h!==d.__[0]&&(u=!0)}}),!(!u&&n.__c.props===l)&&(!i||i.call(this,l,a,c))};F.u=!0;var i=F.shouldComponentUpdate,o=F.componentWillUpdate;F.componentWillUpdate=function(l,a,c){if(this.__e){var f=i;i=void 0,s(l,a,c),i=f}o&&o.call(this,l,a,c)},F.shouldComponentUpdate=s}return n.__N||n.__}function lo(e,t){var r=ge(he++,3);!D.__s&&Yr(r.__H,t)&&(r.__=e,r.i=t,F.__H.__h.push(r))}function ai(e,t){var r=ge(he++,4);!D.__s&&Yr(r.__H,t)&&(r.__=e,r.i=t,F.__h.push(r))}function fo(e){return we=5,Wr(function(){return{current:e}},[])}function ho(e,t,r){we=6,ai(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function Wr(e,t){var r=ge(he++,7);return Yr(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function _o(e,t){return we=8,Wr(function(){return e},t)}function po(e){var t=F.context[e.__c],r=ge(he++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(F)),t.props.value):e.__}function mo(e,t){D.useDebugValue&&D.useDebugValue(t?t(e):e)}function go(e){var t=ge(he++,10),r=oi();return t.__=e,F.componentDidCatch||(F.componentDidCatch=function(n,s){t.__&&t.__(n,s),r[1](n)}),[r[0],function(){r[1](void 0)}]}function yo(){var e=ge(he++,11);if(!e.__){for(var t=F.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function Eo(){for(var e;e=ii.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(nt),e.__H.__h.forEach(Dr),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(e){F=null,Xn&&Xn(e)},D.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Kn&&Kn(e,t)},D.__r=function(e){Wn&&Wn(e),he=0;var t=(F=e.__c).__H;t&&($r===F?(t.__h=[],F.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=rt,r.__N=r.i=void 0})):(t.__h.forEach(nt),t.__h.forEach(Dr),t.__h=[],he=0)),$r=F},D.diffed=function(e){Yn&&Yn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ii.push(t)!==1&&qn===D.requestAnimationFrame||((qn=D.requestAnimationFrame)||bo)(Eo)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==rt&&(r.__=r.__V),r.i=void 0,r.__V=rt})),$r=F=null},D.__c=function(e,t){t.some(function(r){try{r.__h.forEach(nt),r.__h=r.__h.filter(function(n){return!n.__||Dr(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],D.__e(n,r.__v)}}),Qn&&Qn(e,t)},D.unmount=function(e){Zn&&Zn(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{nt(n)}catch(s){t=s}}),r.__H=void 0,t&&D.__e(t,r.__v))};var es=typeof requestAnimationFrame=="function";function bo(e){var t,r=function(){clearTimeout(n),es&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);es&&(t=requestAnimationFrame(r))}function nt(e){var t=F,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),F=t}function Dr(e){var t=F;e.__c=e.__(),F=t}function Yr(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function ui(e,t){return typeof t=="function"?t(e):t}const vo=Object.freeze(Object.defineProperty({__proto__:null,useCallback:_o,useContext:po,useDebugValue:mo,useEffect:lo,useErrorBoundary:go,useId:yo,useImperativeHandle:ho,useLayoutEffect:ai,useMemo:Wr,useReducer:ci,useRef:fo,useState:oi},Symbol.toStringTag,{value:"Module"})),Dh=at(vo),{Transform:$o}=zs;var wo=e=>class li extends $o{constructor(r,n,s,i,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=s,this._hashBitLength=i,this._options=o,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,s){let i=null;try{this.update(r,n)}catch(o){i=o}s(i)}_flush(r){let n=null;try{this.push(this.digest())}catch(s){n=s}r(n)}update(r,n){if(!fe.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return fe.isBuffer(r)||(r=fe.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new li(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:Ro}=zs;var So=e=>class fi extends Ro{constructor(r,n,s,i){super(i),this._rate=r,this._capacity=n,this._delimitedSuffix=s,this._options=i,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,s){let i=null;try{this.update(r,n)}catch(o){i=o}s(i)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!fe.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return fe.isBuffer(r)||(r=fe.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let s=this._state.squeeze(r);return n!==void 0&&(s=s.toString(n)),s}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new fi(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const Io=wo,Co=So;var To=function(e){const t=Io(e),r=Co(e);return function(n,s){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,s);case"keccak256":return new t(1088,512,null,256,s);case"keccak384":return new t(832,768,null,384,s);case"keccak512":return new t(576,1024,null,512,s);case"sha3-224":return new t(1152,448,6,224,s);case"sha3-256":return new t(1088,512,6,256,s);case"sha3-384":return new t(832,768,6,384,s);case"sha3-512":return new t(576,1024,6,512,s);case"shake128":return new r(1344,256,31,s);case"shake256":return new r(1088,512,31,s);default:throw new Error("Invald algorithm: "+n)}}},hi={};const ts=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];hi.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],i=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],a=e[6]^e[16]^e[26]^e[36]^e[46],c=e[7]^e[17]^e[27]^e[37]^e[47],f=e[8]^e[18]^e[28]^e[38]^e[48],u=e[9]^e[19]^e[29]^e[39]^e[49];let d=f^(s<<1|i>>>31),h=u^(i<<1|s>>>31);const _=e[0]^d,T=e[1]^h,v=e[10]^d,$=e[11]^h,p=e[20]^d,b=e[21]^h,A=e[30]^d,g=e[31]^h,L=e[40]^d,q=e[41]^h;d=r^(o<<1|l>>>31),h=n^(l<<1|o>>>31);const U=e[2]^d,H=e[3]^h,x=e[12]^d,_e=e[13]^h,Xe=e[22]^d,y=e[23]^h,m=e[32]^d,S=e[33]^h,w=e[42]^d,R=e[43]^h;d=s^(a<<1|c>>>31),h=i^(c<<1|a>>>31);const E=e[4]^d,C=e[5]^h,B=e[14]^d,k=e[15]^h,P=e[24]^d,W=e[25]^h,V=e[34]^d,de=e[35]^h,$n=e[44]^d,wn=e[45]^h;d=o^(f<<1|u>>>31),h=l^(u<<1|f>>>31);const Rn=e[6]^d,Sn=e[7]^h,In=e[16]^d,Cn=e[17]^h,Tn=e[26]^d,kn=e[27]^h,Nn=e[36]^d,Ln=e[37]^h,An=e[46]^d,On=e[47]^h;d=a^(r<<1|n>>>31),h=c^(n<<1|r>>>31);const Bn=e[8]^d,Fn=e[9]^h,Pn=e[18]^d,jn=e[19]^h,Mn=e[28]^d,Hn=e[29]^h,Vn=e[38]^d,Dn=e[39]^h,Jn=e[48]^d,Un=e[49]^h,It=_,Ct=T,Tt=$<<4|v>>>28,kt=v<<4|$>>>28,Nt=p<<3|b>>>29,Lt=b<<3|p>>>29,At=g<<9|A>>>23,Ot=A<<9|g>>>23,Bt=L<<18|q>>>14,Ft=q<<18|L>>>14,Pt=U<<1|H>>>31,jt=H<<1|U>>>31,Mt=_e<<12|x>>>20,Ht=x<<12|_e>>>20,Vt=Xe<<10|y>>>22,Dt=y<<10|Xe>>>22,Jt=S<<13|m>>>19,Ut=m<<13|S>>>19,zt=w<<2|R>>>30,xt=R<<2|w>>>30,Gt=C<<30|E>>>2,qt=E<<30|C>>>2,Xt=B<<6|k>>>26,Wt=k<<6|B>>>26,Yt=W<<11|P>>>21,Qt=P<<11|W>>>21,Zt=V<<15|de>>>17,Kt=de<<15|V>>>17,er=wn<<29|$n>>>3,tr=$n<<29|wn>>>3,rr=Rn<<28|Sn>>>4,nr=Sn<<28|Rn>>>4,sr=Cn<<23|In>>>9,ir=In<<23|Cn>>>9,or=Tn<<25|kn>>>7,cr=kn<<25|Tn>>>7,ar=Nn<<21|Ln>>>11,ur=Ln<<21|Nn>>>11,lr=On<<24|An>>>8,fr=An<<24|On>>>8,hr=Bn<<27|Fn>>>5,dr=Fn<<27|Bn>>>5,_r=Pn<<20|jn>>>12,pr=jn<<20|Pn>>>12,mr=Hn<<7|Mn>>>25,gr=Mn<<7|Hn>>>25,yr=Vn<<8|Dn>>>24,Er=Dn<<8|Vn>>>24,br=Jn<<14|Un>>>18,vr=Un<<14|Jn>>>18;e[0]=It^~Mt&Yt,e[1]=Ct^~Ht&Qt,e[10]=rr^~_r&Nt,e[11]=nr^~pr&Lt,e[20]=Pt^~Xt&or,e[21]=jt^~Wt&cr,e[30]=hr^~Tt&Vt,e[31]=dr^~kt&Dt,e[40]=Gt^~sr&mr,e[41]=qt^~ir&gr,e[2]=Mt^~Yt&ar,e[3]=Ht^~Qt&ur,e[12]=_r^~Nt&Jt,e[13]=pr^~Lt&Ut,e[22]=Xt^~or&yr,e[23]=Wt^~cr&Er,e[32]=Tt^~Vt&Zt,e[33]=kt^~Dt&Kt,e[42]=sr^~mr&At,e[43]=ir^~gr&Ot,e[4]=Yt^~ar&br,e[5]=Qt^~ur&vr,e[14]=Nt^~Jt&er,e[15]=Lt^~Ut&tr,e[24]=or^~yr&Bt,e[25]=cr^~Er&Ft,e[34]=Vt^~Zt&lr,e[35]=Dt^~Kt&fr,e[44]=mr^~At&zt,e[45]=gr^~Ot&xt,e[6]=ar^~br&It,e[7]=ur^~vr&Ct,e[16]=Jt^~er&rr,e[17]=Ut^~tr&nr,e[26]=yr^~Bt&Pt,e[27]=Er^~Ft&jt,e[36]=Zt^~lr&hr,e[37]=Kt^~fr&dr,e[46]=At^~zt&Gt,e[47]=Ot^~xt&qt,e[8]=br^~It&Mt,e[9]=vr^~Ct&Ht,e[18]=er^~rr&_r,e[19]=tr^~nr&pr,e[28]=Bt^~Pt&Xt,e[29]=Ft^~jt&Wt,e[38]=lr^~hr&Tt,e[39]=fr^~dr&kt,e[48]=zt^~Gt&sr,e[49]=xt^~qt&ir,e[0]^=ts[t*2],e[1]^=ts[t*2+1]}};const ot=hi;function Ie(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Ie.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};Ie.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(ot.p1600(this.state),this.count=0)};Ie.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&ot.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),ot.p1600(this.state),this.count=0,this.squeezing=!0};Ie.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=fe.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(ot.p1600(this.state),this.count=0);return t};Ie.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};var ko=Ie,Jh=To(ko),No={},lt={},Qr=Lo;function Lo(e){e=e||{};var t=e.max||Number.MAX_SAFE_INTEGER,r=typeof e.start<"u"?e.start:Math.floor(Math.random()*t);return function(){return r=r%t,r++}}const rs=(e,t)=>function(){const r=t.promiseModule,n=new Array(arguments.length);for(let s=0;s<arguments.length;s++)n[s]=arguments[s];return new r((s,i)=>{t.errorFirst?n.push(function(o,l){if(t.multiArgs){const a=new Array(arguments.length-1);for(let c=1;c<arguments.length;c++)a[c-1]=arguments[c];o?(a.unshift(o),i(a)):s(a)}else o?i(o):s(l)}):n.push(function(o){if(t.multiArgs){const l=new Array(arguments.length-1);for(let a=0;a<arguments.length;a++)l[a]=arguments[a];s(l)}else s(o)}),e.apply(this,n)})};var Ao=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const r=s=>{const i=o=>typeof o=="string"?s===o:o.test(s);return t.include?t.include.some(i):!t.exclude.some(i)};let n;typeof e=="function"?n=function(){return t.excludeMain?e.apply(this,arguments):rs(e,t).apply(this,arguments)}:n=Object.create(Object.getPrototypeOf(e));for(const s in e){const i=e[s];n[s]=typeof i=="function"&&r(s)?rs(i,t):i}return n},je={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});const Oo=xs;function ns(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function Bo(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}let Fo=class extends Oo.EventEmitter{emit(t,...r){let n=t==="error";const s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){let o;if(r.length>0&&([o]=r),o instanceof Error)throw o;const l=new Error(`Unhandled error.${o?` (${o.message})`:""}`);throw l.context=o,l}const i=s[t];if(i===void 0)return!1;if(typeof i=="function")ns(i,this,r);else{const o=i.length,l=Bo(i);for(let a=0;a<o;a+=1)ns(l[a],this,r)}return!0}};Me.default=Fo;var Po=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(je,"__esModule",{value:!0});je.BaseBlockTracker=void 0;const jo=Po(Me),Mo=1e3,Ho=(e,t)=>e+t,ss=["sync","latest"];class Vo extends jo.default{constructor(t){super(),this._blockResetDuration=t.blockResetDuration||20*Mo,this._usePastBlocks=t.usePastBlocks||!1,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(r=>this.once("latest",r))}removeAllListeners(t){return t?super.removeAllListeners(t):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(t){ss.includes(t)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return ss.map(t=>this.listenerCount(t)).reduce(Ho)}_shouldUseNewBlock(t){const r=this._currentBlock;if(!r)return!0;const n=is(t),s=is(r);return this._usePastBlocks&&n<s||n>s}_newPotentialLatest(t){this._shouldUseNewBlock(t)&&this._setCurrentBlock(t)}_setCurrentBlock(t){const r=this._currentBlock;this._currentBlock=t,this.emit("latest",t),this.emit("sync",{oldBlock:r,newBlock:t})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}je.BaseBlockTracker=Vo;function is(e){return Number.parseInt(e,16)}var di={},_i={},X={};class pi extends TypeError{constructor(t,r){let n;const{message:s,explanation:i,...o}=t,{path:l}=t,a=l.length===0?s:`At path: ${l.join(".")} -- ${s}`;super(i??a),i!=null&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function Do(e){return te(e)&&typeof e[Symbol.iterator]=="function"}function te(e){return typeof e=="object"&&e!=null}function os(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function G(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function Jo(e){const{done:t,value:r}=e.next();return t?void 0:r}function Uo(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:s,branch:i}=t,{type:o}=r,{refinement:l,message:a=`Expected a value of type \`${o}\`${l?` with refinement \`${l}\``:""}, but received: \`${G(n)}\``}=e;return{value:n,type:o,refinement:l,key:s[s.length-1],path:s,branch:i,...e,message:a}}function*Jr(e,t,r,n){Do(e)||(e=[e]);for(const s of e){const i=Uo(s,t,r,n);i&&(yield i)}}function*Zr(e,t,r={}){const{path:n=[],branch:s=[e],coerce:i=!1,mask:o=!1}=r,l={path:n,branch:s};if(i&&(e=t.coercer(e,l),o&&t.type!=="type"&&te(t.schema)&&te(e)&&!Array.isArray(e)))for(const c in e)t.schema[c]===void 0&&delete e[c];let a="valid";for(const c of t.validator(e,l))c.explanation=r.message,a="not_valid",yield[c,void 0];for(let[c,f,u]of t.entries(e,l)){const d=Zr(f,u,{path:c===void 0?n:[...n,c],branch:c===void 0?s:[...s,f],coerce:i,mask:o,message:r.message});for(const h of d)h[0]?(a=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):i&&(f=h[1],c===void 0?e=f:e instanceof Map?e.set(c,f):e instanceof Set?e.add(f):te(e)&&(f!==void 0||c in e)&&(e[c]=f))}if(a!=="not_valid")for(const c of t.refiner(e,l))c.explanation=r.message,a="not_refined",yield[c,void 0];a==="valid"&&(yield[void 0,e])}class z{constructor(t){const{type:r,schema:n,validator:s,refiner:i,coercer:o=a=>a,entries:l=function*(){}}=t;this.type=r,this.schema=n,this.entries=l,this.coercer=o,s?this.validator=(a,c)=>{const f=s(a,c);return Jr(f,c,this,a)}:this.validator=()=>[],i?this.refiner=(a,c)=>{const f=i(a,c);return Jr(f,c,this,a)}:this.refiner=()=>[]}assert(t,r){return mi(t,this,r)}create(t,r){return gi(t,this,r)}is(t){return Kr(t,this)}mask(t,r){return yi(t,this,r)}validate(t,r={}){return Ce(t,this,r)}}function mi(e,t,r){const n=Ce(e,t,{message:r});if(n[0])throw n[0]}function gi(e,t,r){const n=Ce(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function yi(e,t,r){const n=Ce(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function Kr(e,t){return!Ce(e,t)[0]}function Ce(e,t,r={}){const n=Zr(e,t,r),s=Jo(n);return s[0]?[new pi(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function zo(...e){const t=e[0].type==="type",r=e.map(s=>s.schema),n=Object.assign({},...r);return t?Ve(n):He(n)}function Z(e,t){return new z({type:e,schema:null,validator:t})}function xo(e,t){return new z({...e,refiner:(r,n)=>r===void 0||e.refiner(r,n),validator(r,n){return r===void 0?!0:(t(r,n),e.validator(r,n))}})}function Go(e){return new z({type:"dynamic",schema:null,*entries(t,r){yield*e(t,r).entries(t,r)},validator(t,r){return e(t,r).validator(t,r)},coercer(t,r){return e(t,r).coercer(t,r)},refiner(t,r){return e(t,r).refiner(t,r)}})}function qo(e){let t;return new z({type:"lazy",schema:null,*entries(r,n){t??(t=e()),yield*t.entries(r,n)},validator(r,n){return t??(t=e()),t.validator(r,n)},coercer(r,n){return t??(t=e()),t.coercer(r,n)},refiner(r,n){return t??(t=e()),t.refiner(r,n)}})}function Xo(e,t){const{schema:r}=e,n={...r};for(const s of t)delete n[s];switch(e.type){case"type":return Ve(n);default:return He(n)}}function Wo(e){const t=e instanceof z,r=t?{...e.schema}:{...e};for(const n in r)r[n]=Ei(r[n]);return t&&e.type==="type"?Ve(r):He(r)}function Yo(e,t){const{schema:r}=e,n={};for(const s of t)n[s]=r[s];switch(e.type){case"type":return Ve(n);default:return He(n)}}function Qo(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),Z(e,t)}function Zo(){return Z("any",()=>!0)}function Ko(e){return new z({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${G(t)}`}})}function ec(){return Z("bigint",e=>typeof e=="bigint")}function tc(){return Z("boolean",e=>typeof e=="boolean")}function rc(){return Z("date",e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${G(e)}`)}function nc(e){const t={},r=e.map(n=>G(n)).join();for(const n of e)t[n]=n;return new z({type:"enums",schema:t,validator(n){return e.includes(n)||`Expected one of \`${r}\`, but received: ${G(n)}`}})}function sc(){return Z("func",e=>typeof e=="function"||`Expected a function, but received: ${G(e)}`)}function ic(e){return Z("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${G(t)}`)}function oc(){return Z("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${G(e)}`)}function cc(e){return new z({type:"intersection",schema:null,*entries(t,r){for(const n of e)yield*n.entries(t,r)},*validator(t,r){for(const n of e)yield*n.validator(t,r)},*refiner(t,r){for(const n of e)yield*n.refiner(t,r)}})}function ac(e){const t=G(e),r=typeof e;return new z({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${G(n)}`}})}function uc(e,t){return new z({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(const[n,s]of r.entries())yield[n,n,e],yield[n,s,t]},coercer(r){return r instanceof Map?new Map(r):r},validator(r){return r instanceof Map||`Expected a \`Map\` object, but received: ${G(r)}`}})}function en(){return Z("never",()=>!1)}function lc(e){return new z({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function fc(){return Z("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${G(e)}`)}function He(e){const t=e?Object.keys(e):[],r=en();return new z({type:"object",schema:e||null,*entries(n){if(e&&te(n)){const s=new Set(Object.keys(n));for(const i of t)s.delete(i),yield[i,n[i],e[i]];for(const i of s)yield[i,n[i],r]}},validator(n){return te(n)||`Expected an object, but received: ${G(n)}`},coercer(n){return te(n)?{...n}:n}})}function Ei(e){return new z({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function hc(e,t){return new z({type:"record",schema:null,*entries(r){if(te(r))for(const n in r){const s=r[n];yield[n,n,e],yield[n,s,t]}},validator(r){return te(r)||`Expected an object, but received: ${G(r)}`}})}function dc(){return Z("regexp",e=>e instanceof RegExp)}function _c(e){return new z({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const r of t)yield[r,r,e]},coercer(t){return t instanceof Set?new Set(t):t},validator(t){return t instanceof Set||`Expected a \`Set\` object, but received: ${G(t)}`}})}function bi(){return Z("string",e=>typeof e=="string"||`Expected a string, but received: ${G(e)}`)}function pc(e){const t=en();return new z({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],e[s]||t]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${G(r)}`}})}function Ve(e){const t=Object.keys(e);return new z({type:"type",schema:e,*entries(r){if(te(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return te(r)||`Expected an object, but received: ${G(r)}`},coercer(r){return te(r)?{...r}:r}})}function mc(e){const t=e.map(r=>r.type).join(" | ");return new z({type:"union",schema:null,coercer(r){for(const n of e){const[s,i]=n.validate(r,{coerce:!0});if(!s)return i}return r},validator(r,n){const s=[];for(const i of e){const[...o]=Zr(r,i,n),[l]=o;if(l[0])for(const[a]of o)a&&s.push(a);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${G(r)}`,...s]}})}function vi(){return Z("unknown",()=>!0)}function tn(e,t,r){return new z({...e,coercer:(n,s)=>Kr(n,t)?e.coercer(r(n,s),s):e.coercer(n,s)})}function gc(e,t,r={}){return tn(e,vi(),n=>{const s=typeof t=="function"?t():t;if(n===void 0)return s;if(!r.strict&&os(n)&&os(s)){const i={...n};let o=!1;for(const l in s)i[l]===void 0&&(i[l]=s[l],o=!0);if(o)return i}return n})}function yc(e){return tn(e,bi(),t=>t.trim())}function Ec(e){return ye(e,"empty",t=>{const r=$i(t);return r===0||`Expected an empty ${e.type} but received one with a size of \`${r}\``})}function $i(e){return e instanceof Map||e instanceof Set?e.size:e.length}function bc(e,t,r={}){const{exclusive:n}=r;return ye(e,"max",s=>n?s<t:s<=t||`Expected a ${e.type} less than ${n?"":"or equal to "}${t} but received \`${s}\``)}function vc(e,t,r={}){const{exclusive:n}=r;return ye(e,"min",s=>n?s>t:s>=t||`Expected a ${e.type} greater than ${n?"":"or equal to "}${t} but received \`${s}\``)}function $c(e){return ye(e,"nonempty",t=>$i(t)>0||`Expected a nonempty ${e.type} but received an empty one`)}function wc(e,t){return ye(e,"pattern",r=>t.test(r)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${r}"`)}function Rc(e,t,r=t){const n=`Expected a ${e.type}`,s=t===r?`of \`${t}\``:`between \`${t}\` and \`${r}\``;return ye(e,"size",i=>{if(typeof i=="number"||i instanceof Date)return t<=i&&i<=r||`${n} ${s} but received \`${i}\``;if(i instanceof Map||i instanceof Set){const{size:o}=i;return t<=o&&o<=r||`${n} with a size ${s} but received one with a size of \`${o}\``}else{const{length:o}=i;return t<=o&&o<=r||`${n} with a length ${s} but received one with a length of \`${o}\``}})}function ye(e,t,r){return new z({...e,*refiner(n,s){yield*e.refiner(n,s);const i=r(n,s),o=Jr(i,s,e,n);for(const l of o)yield{...l,refinement:t}}})}const Sc=Object.freeze(Object.defineProperty({__proto__:null,Struct:z,StructError:pi,any:Zo,array:Ko,assert:mi,assign:zo,bigint:ec,boolean:tc,coerce:tn,create:gi,date:rc,defaulted:gc,define:Z,deprecated:xo,dynamic:Go,empty:Ec,enums:nc,func:sc,instance:ic,integer:oc,intersection:cc,is:Kr,lazy:qo,literal:ac,map:uc,mask:yi,max:bc,min:vc,never:en,nonempty:$c,nullable:lc,number:fc,object:He,omit:Xo,optional:Ei,partial:Wo,pattern:wc,pick:Yo,record:hc,refine:ye,regexp:dc,set:_c,size:Rc,string:bi,struct:Qo,trimmed:yc,tuple:pc,type:Ve,union:mc,unknown:vi,validate:Ce},Symbol.toStringTag,{value:"Module"})),Ee=at(Sc);Object.defineProperty(X,"__esModule",{value:!0});X.assertExhaustive=X.assertStruct=X.assert=X.AssertionError=void 0;const Ic=Ee;function Cc(e){return typeof e=="object"&&e!==null&&"message"in e}function Tc(e){var t,r;return typeof((r=(t=e==null?void 0:e.prototype)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)=="string"}function kc(e){const t=Cc(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}function wi(e,t){return Tc(e)?new e({message:t}):e({message:t})}class rn extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}}X.AssertionError=rn;function Nc(e,t="Assertion failed.",r=rn){if(!e)throw t instanceof Error?t:wi(r,t)}X.assert=Nc;function Lc(e,t,r="Assertion failed",n=rn){try{(0,Ic.assert)(e,t)}catch(s){throw wi(n,`${r}: ${kc(s)}.`)}}X.assertStruct=Lc;function Ac(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}X.assertExhaustive=Ac;var De={};Object.defineProperty(De,"__esModule",{value:!0});De.base64=void 0;const Oc=Ee,Bc=X,Fc=(e,t={})=>{var r,n;const s=(r=t.paddingRequired)!==null&&r!==void 0?r:!1,i=(n=t.characterSet)!==null&&n!==void 0?n:"base64";let o;i==="base64"?o=String.raw`[A-Za-z0-9+\/]`:((0,Bc.assert)(i==="base64url"),o=String.raw`[-_A-Za-z0-9]`);let l;return s?l=new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):l=new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,Oc.pattern)(e,l)};De.base64=Fc;var O={},Je={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.StrictHexStruct=e.HexStruct=void 0;const t=Ee,r=X;e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu);function n(c){return(0,t.is)(c,e.HexStruct)}e.isHexString=n;function s(c){return(0,t.is)(c,e.StrictHexStruct)}e.isStrictHexString=s;function i(c){(0,r.assert)(n(c),"Value must be a hexadecimal string.")}e.assertIsHexString=i;function o(c){(0,r.assert)(s(c),'Value must be a hexadecimal string, starting with "0x".')}e.assertIsStrictHexString=o;function l(c){return c.startsWith("0x")?c:c.startsWith("0X")?`0x${c.substring(2)}`:`0x${c}`}e.add0x=l;function a(c){return c.startsWith("0x")||c.startsWith("0X")?c.substring(2):c}e.remove0x=a})(Je);Object.defineProperty(O,"__esModule",{value:!0});O.createDataView=O.concatBytes=O.valueToBytes=O.stringToBytes=O.numberToBytes=O.signedBigIntToBytes=O.bigIntToBytes=O.hexToBytes=O.bytesToString=O.bytesToNumber=O.bytesToSignedBigInt=O.bytesToBigInt=O.bytesToHex=O.assertIsBytes=O.isBytes=void 0;const K=X,Ur=Je,cs=48,as=58,us=87;function Pc(){const e=[];return()=>{if(e.length===0)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}const jc=Pc();function nn(e){return e instanceof Uint8Array}O.isBytes=nn;function Te(e){(0,K.assert)(nn(e),"Value must be a Uint8Array.")}O.assertIsBytes=Te;function Ri(e){if(Te(e),e.length===0)return"0x";const t=jc(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return(0,Ur.add0x)(r.join(""))}O.bytesToHex=Ri;function Si(e){Te(e);const t=Ri(e);return BigInt(t)}O.bytesToBigInt=Si;function Mc(e){Te(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(e.length*8,t)}O.bytesToSignedBigInt=Mc;function Hc(e){Te(e);const t=Si(e);return(0,K.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)}O.bytesToNumber=Hc;function Vc(e){return Te(e),new TextDecoder().decode(e)}O.bytesToString=Vc;function ft(e){var t;if(((t=e==null?void 0:e.toLowerCase)===null||t===void 0?void 0:t.call(e))==="0x")return new Uint8Array;(0,Ur.assertIsHexString)(e);const r=(0,Ur.remove0x)(e).toLowerCase(),n=r.length%2===0?r:`0${r}`,s=new Uint8Array(n.length/2);for(let i=0;i<s.length;i++){const o=n.charCodeAt(i*2),l=n.charCodeAt(i*2+1),a=o-(o<as?cs:us),c=l-(l<as?cs:us);s[i]=a*16+c}return s}O.hexToBytes=ft;function Ii(e){(0,K.assert)(typeof e=="bigint","Value must be a bigint."),(0,K.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");const t=e.toString(16);return ft(t)}O.bigIntToBytes=Ii;function Dc(e,t){(0,K.assert)(t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(t*8+-1))}function Jc(e,t){(0,K.assert)(typeof e=="bigint","Value must be a bigint."),(0,K.assert)(typeof t=="number","Byte length must be a number."),(0,K.assert)(t>0,"Byte length must be greater than 0."),(0,K.assert)(Dc(e,t),"Byte length is too small to represent the given value.");let r=e;const n=new Uint8Array(t);for(let s=0;s<n.length;s++)n[s]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return n.reverse()}O.signedBigIntToBytes=Jc;function Ci(e){(0,K.assert)(typeof e=="number","Value must be a number."),(0,K.assert)(e>=0,"Value must be a non-negative number."),(0,K.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");const t=e.toString(16);return ft(t)}O.numberToBytes=Ci;function Ti(e){return(0,K.assert)(typeof e=="string","Value must be a string."),new TextEncoder().encode(e)}O.stringToBytes=Ti;function ki(e){if(typeof e=="bigint")return Ii(e);if(typeof e=="number")return Ci(e);if(typeof e=="string")return e.startsWith("0x")?ft(e):Ti(e);if(nn(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}O.valueToBytes=ki;function Uc(e){const t=new Array(e.length);let r=0;for(let s=0;s<e.length;s++){const i=ki(e[s]);t[s]=i,r+=i.length}const n=new Uint8Array(r);for(let s=0,i=0;s<t.length;s++)n.set(t[s],i),i+=t[s].length;return n}O.concatBytes=Uc;function zc(e){if(typeof fe<"u"&&e instanceof fe){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}O.createDataView=zc;var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.ChecksumStruct=void 0;const ls=Ee,xc=De;ht.ChecksumStruct=(0,ls.size)((0,xc.base64)((0,ls.string)(),{paddingRequired:!0}),44,44);var ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.createHex=ce.createBytes=ce.createBigInt=ce.createNumber=void 0;const J=Ee,Gc=X,Ni=O,dt=Je,Li=(0,J.union)([(0,J.number)(),(0,J.bigint)(),(0,J.string)(),dt.StrictHexStruct]),qc=(0,J.coerce)((0,J.number)(),Li,Number),Xc=(0,J.coerce)((0,J.bigint)(),Li,BigInt);(0,J.union)([dt.StrictHexStruct,(0,J.instance)(Uint8Array)]);const Wc=(0,J.coerce)((0,J.instance)(Uint8Array),(0,J.union)([dt.StrictHexStruct]),Ni.hexToBytes),Yc=(0,J.coerce)(dt.StrictHexStruct,(0,J.instance)(Uint8Array),Ni.bytesToHex);function Qc(e){try{const t=(0,J.create)(e,qc);return(0,Gc.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof J.StructError?new Error(`Expected a number-like value, got "${e}".`):t}}ce.createNumber=Qc;function Zc(e){try{return(0,J.create)(e,Xc)}catch(t){throw t instanceof J.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}}ce.createBigInt=Zc;function Kc(e){if(typeof e=="string"&&e.toLowerCase()==="0x")return new Uint8Array;try{return(0,J.create)(e,Wc)}catch(t){throw t instanceof J.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}ce.createBytes=Kc;function ea(e){if(e instanceof Uint8Array&&e.length===0||typeof e=="string"&&e.toLowerCase()==="0x")return"0x";try{return(0,J.create)(e,Yc)}catch(t){throw t instanceof J.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}ce.createHex=ea;var Re={},Ai=j&&j.__classPrivateFieldSet||function(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r},Y=j&&j.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},re,ie;Object.defineProperty(Re,"__esModule",{value:!0});Re.FrozenSet=Re.FrozenMap=void 0;class sn{constructor(t){re.set(this,void 0),Ai(this,re,new Map(t),"f"),Object.freeze(this)}get size(){return Y(this,re,"f").size}[(re=new WeakMap,Symbol.iterator)](){return Y(this,re,"f")[Symbol.iterator]()}entries(){return Y(this,re,"f").entries()}forEach(t,r){return Y(this,re,"f").forEach((n,s,i)=>t.call(r,n,s,this))}get(t){return Y(this,re,"f").get(t)}has(t){return Y(this,re,"f").has(t)}keys(){return Y(this,re,"f").keys()}values(){return Y(this,re,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([t,r])=>`${String(t)} => ${String(r)}`).join(", ")} `:""}}`}}Re.FrozenMap=sn;class on{constructor(t){ie.set(this,void 0),Ai(this,ie,new Set(t),"f"),Object.freeze(this)}get size(){return Y(this,ie,"f").size}[(ie=new WeakMap,Symbol.iterator)](){return Y(this,ie,"f")[Symbol.iterator]()}entries(){return Y(this,ie,"f").entries()}forEach(t,r){return Y(this,ie,"f").forEach((n,s,i)=>t.call(r,n,s,this))}has(t){return Y(this,ie,"f").has(t)}keys(){return Y(this,ie,"f").keys()}values(){return Y(this,ie,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(t=>String(t)).join(", ")} `:""}}`}}Re.FrozenSet=on;Object.freeze(sn);Object.freeze(sn.prototype);Object.freeze(on);Object.freeze(on.prototype);var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});var Bi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.getJsonSize=e.isValidJson=e.JsonStruct=e.UnsafeJsonStruct=void 0;const t=Ee,r=X,n=()=>(0,t.define)("finite number",g=>(0,t.is)(g,(0,t.number)())&&Number.isFinite(g));e.UnsafeJsonStruct=(0,t.union)([(0,t.literal)(null),(0,t.boolean)(),n(),(0,t.string)(),(0,t.array)((0,t.lazy)(()=>e.UnsafeJsonStruct)),(0,t.record)((0,t.string)(),(0,t.lazy)(()=>e.UnsafeJsonStruct))]),e.JsonStruct=(0,t.define)("Json",(g,L)=>{function q(U,H){const _e=[...H.validator(U,L)];return _e.length>0?_e:!0}try{const U=q(g,e.UnsafeJsonStruct);return U!==!0?U:q(JSON.parse(JSON.stringify(g)),e.UnsafeJsonStruct)}catch(U){return U instanceof RangeError?"Circular reference detected":!1}});function s(g){return(0,t.is)(g,e.JsonStruct)}e.isValidJson=s;function i(g){(0,r.assertStruct)(g,e.JsonStruct,"Invalid JSON value");const L=JSON.stringify(g);return new TextEncoder().encode(L).byteLength}e.getJsonSize=i,e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,t.object)({code:(0,t.integer)(),message:(0,t.string)(),data:(0,t.optional)(e.JsonStruct),stack:(0,t.optional)((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.optional)((0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)])),e.JsonRpcRequestStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:e.JsonRpcParamsStruct}),e.JsonRpcNotificationStruct=(0,t.omit)(e.JsonRpcRequestStruct,["id"]);function o(g){return(0,t.is)(g,e.JsonRpcNotificationStruct)}e.isJsonRpcNotification=o;function l(g,L){(0,r.assertStruct)(g,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",L)}e.assertIsJsonRpcNotification=l;function a(g){return(0,t.is)(g,e.JsonRpcRequestStruct)}e.isJsonRpcRequest=a;function c(g,L){(0,r.assertStruct)(g,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",L)}e.assertIsJsonRpcRequest=c,e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]);function f(g){return(0,t.is)(g,e.PendingJsonRpcResponseStruct)}e.isPendingJsonRpcResponse=f;function u(g,L){(0,r.assertStruct)(g,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",L)}e.assertIsPendingJsonRpcResponse=u;function d(g){return(0,t.is)(g,e.JsonRpcResponseStruct)}e.isJsonRpcResponse=d;function h(g,L){(0,r.assertStruct)(g,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",L)}e.assertIsJsonRpcResponse=h;function _(g){return(0,t.is)(g,e.JsonRpcSuccessStruct)}e.isJsonRpcSuccess=_;function T(g,L){(0,r.assertStruct)(g,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",L)}e.assertIsJsonRpcSuccess=T;function v(g){return(0,t.is)(g,e.JsonRpcFailureStruct)}e.isJsonRpcFailure=v;function $(g,L){(0,r.assertStruct)(g,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",L)}e.assertIsJsonRpcFailure=$;function p(g){return(0,t.is)(g,e.JsonRpcErrorStruct)}e.isJsonRpcError=p;function b(g,L){(0,r.assertStruct)(g,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",L)}e.assertIsJsonRpcError=b;function A(g){const{permitEmptyString:L,permitFractions:q,permitNull:U}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},g);return x=>!!(typeof x=="number"&&(q||Number.isInteger(x))||typeof x=="string"&&(L||x.length>0)||U&&x===null)}e.getJsonRpcIdValidator=A})(Bi);var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});var Se={},zr={exports:{}},wr,fs;function ta(){if(fs)return wr;fs=1;var e=1e3,t=e*60,r=t*60,n=r*24,s=n*7,i=n*365.25;wr=function(f,u){u=u||{};var d=typeof f;if(d==="string"&&f.length>0)return o(f);if(d==="number"&&isFinite(f))return u.long?a(f):l(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function o(f){if(f=String(f),!(f.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(u){var d=parseFloat(u[1]),h=(u[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return d*i;case"weeks":case"week":case"w":return d*s;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function l(f){var u=Math.abs(f);return u>=n?Math.round(f/n)+"d":u>=r?Math.round(f/r)+"h":u>=t?Math.round(f/t)+"m":u>=e?Math.round(f/e)+"s":f+"ms"}function a(f){var u=Math.abs(f);return u>=n?c(f,u,n,"day"):u>=r?c(f,u,r,"hour"):u>=t?c(f,u,t,"minute"):u>=e?c(f,u,e,"second"):f+" ms"}function c(f,u,d,h){var _=u>=d*1.5;return Math.round(f/d)+" "+h+(_?"s":"")}return wr}function ra(e){r.debug=r,r.default=r,r.coerce=a,r.disable=i,r.enable=s,r.enabled=o,r.humanize=ta(),r.destroy=c,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let u=0;for(let d=0;d<f.length;d++)u=(u<<5)-u+f.charCodeAt(d),u|=0;return r.colors[Math.abs(u)%r.colors.length]}r.selectColor=t;function r(f){let u,d=null,h,_;function T(...v){if(!T.enabled)return;const $=T,p=Number(new Date),b=p-(u||p);$.diff=b,$.prev=u,$.curr=p,u=p,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let A=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(L,q)=>{if(L==="%%")return"%";A++;const U=r.formatters[q];if(typeof U=="function"){const H=v[A];L=U.call($,H),v.splice(A,1),A--}return L}),r.formatArgs.call($,v),($.log||r.log).apply($,v)}return T.namespace=f,T.useColors=r.useColors(),T.color=r.selectColor(f),T.extend=n,T.destroy=r.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,_=r.enabled(f)),_),set:v=>{d=v}}),typeof r.init=="function"&&r.init(T),T}function n(f,u){const d=r(this.namespace+(typeof u>"u"?":":u)+f);return d.log=this.log,d}function s(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let u;const d=(typeof f=="string"?f:"").split(/[\s,]+/),h=d.length;for(u=0;u<h;u++)d[u]&&(f=d[u].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function i(){const f=[...r.names.map(l),...r.skips.map(l).map(u=>"-"+u)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let u,d;for(u=0,d=r.skips.length;u<d;u++)if(r.skips[u].test(f))return!1;for(u=0,d=r.names.length;u<d;u++)if(r.names[u].test(f))return!0;return!1}function l(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function a(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var na=ra;(function(e,t){var r={};t.formatArgs=s,t.save=i,t.load=o,t.useColors=n,t.storage=l(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;c.splice(1,0,f,"color: inherit");let u=0,d=0;c[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(d=u))}),c.splice(d,0,f)}t.log=console.debug||console.log||(()=>{});function i(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function o(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof Br<"u"&&"env"in Br&&(c=r.DEBUG),c}function l(){try{return localStorage}catch{}}e.exports=na(t);const{formatters:a}=e.exports;a.j=function(c){try{return JSON.stringify(c)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(zr,zr.exports);var sa=zr.exports,ia=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Se,"__esModule",{value:!0});Se.createModuleLogger=Se.createProjectLogger=void 0;const oa=ia(sa),ca=(0,oa.default)("metamask");function aa(e){return ca.extend(e)}Se.createProjectLogger=aa;function ua(e,t){return e.extend(t)}Se.createModuleLogger=ua;var Pi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0;function t(c){return Array.isArray(c)&&c.length>0}e.isNonEmptyArray=t;function r(c){return c==null}e.isNullOrUndefined=r;function n(c){return!!c&&typeof c=="object"&&!Array.isArray(c)}e.isObject=n;const s=(c,f)=>Object.hasOwnProperty.call(c,f);e.hasProperty=s,function(c){c[c.Null=4]="Null",c[c.Comma=1]="Comma",c[c.Wrapper=1]="Wrapper",c[c.True=4]="True",c[c.False=5]="False",c[c.Quote=1]="Quote",c[c.Colon=1]="Colon",c[c.Date=24]="Date"}(e.JsonSize||(e.JsonSize={})),e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function i(c){if(typeof c!="object"||c===null)return!1;try{let f=c;for(;Object.getPrototypeOf(f)!==null;)f=Object.getPrototypeOf(f);return Object.getPrototypeOf(c)===f}catch{return!1}}e.isPlainObject=i;function o(c){return c.charCodeAt(0)<=127}e.isASCII=o;function l(c){var f;return c.split("").reduce((d,h)=>o(h)?d+1:d+2,0)+((f=c.match(e.ESCAPE_CHARACTERS_REGEXP))!==null&&f!==void 0?f:[]).length}e.calculateStringSize=l;function a(c){return c.toString().length}e.calculateNumberSize=a})(Pi);var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.hexToBigInt=ae.hexToNumber=ae.bigIntToHex=ae.numberToHex=void 0;const $e=X,Be=Je,la=e=>((0,$e.assert)(typeof e=="number","Value must be a number."),(0,$e.assert)(e>=0,"Value must be a non-negative number."),(0,$e.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,Be.add0x)(e.toString(16)));ae.numberToHex=la;const fa=e=>((0,$e.assert)(typeof e=="bigint","Value must be a bigint."),(0,$e.assert)(e>=0,"Value must be a non-negative bigint."),(0,Be.add0x)(e.toString(16)));ae.bigIntToHex=fa;const ha=e=>{(0,Be.assertIsHexString)(e);const t=parseInt(e,16);return(0,$e.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};ae.hexToNumber=ha;const da=e=>((0,Be.assertIsHexString)(e),BigInt((0,Be.add0x)(e)));ae.hexToBigInt=da;var ji={};Object.defineProperty(ji,"__esModule",{value:!0});var Mi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,function(i){i[i.Millisecond=1]="Millisecond",i[i.Second=1e3]="Second",i[i.Minute=6e4]="Minute",i[i.Hour=36e5]="Hour",i[i.Day=864e5]="Day",i[i.Week=6048e5]="Week",i[i.Year=31536e6]="Year"}(e.Duration||(e.Duration={}));const t=i=>Number.isInteger(i)&&i>=0,r=(i,o)=>{if(!t(i))throw new Error(`"${o}" must be a non-negative integer. Received: "${i}".`)};function n(i,o){return r(i,"count"),i*o}e.inMilliseconds=n;function s(i){return r(i,"timestamp"),Date.now()-i}e.timeSince=s})(Mi);var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});var Vi={},xr={exports:{}};const _a="2.0.0",Di=256,pa=Number.MAX_SAFE_INTEGER||9007199254740991,ma=16,ga=Di-6,ya=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var _t={MAX_LENGTH:Di,MAX_SAFE_COMPONENT_LENGTH:ma,MAX_SAFE_BUILD_LENGTH:ga,MAX_SAFE_INTEGER:pa,RELEASE_TYPES:ya,SEMVER_SPEC_VERSION:_a,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Rr={};const Ea=typeof Br=="object"&&Rr&&Rr.NODE_DEBUG&&/\bsemver\b/i.test(Rr.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var pt=Ea;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=_t,i=pt;t=e.exports={};const o=t.re=[],l=t.safeRe=[],a=t.src=[],c=t.t={};let f=0;const u="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",s],[u,n]],h=T=>{for(const[v,$]of d)T=T.split(`${v}*`).join(`${v}{0,${$}}`).split(`${v}+`).join(`${v}{1,${$}}`);return T},_=(T,v,$)=>{const p=h(v),b=f++;i(T,b,v),c[T]=b,a[b]=v,o[b]=new RegExp(v,$?"g":void 0),l[b]=new RegExp(p,$?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*"),_("NUMERICIDENTIFIERLOOSE","\\d+"),_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),_("MAINVERSION",`(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})\\.(${a[c.NUMERICIDENTIFIER]})`),_("MAINVERSIONLOOSE",`(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})\\.(${a[c.NUMERICIDENTIFIERLOOSE]})`),_("PRERELEASEIDENTIFIER",`(?:${a[c.NUMERICIDENTIFIER]}|${a[c.NONNUMERICIDENTIFIER]})`),_("PRERELEASEIDENTIFIERLOOSE",`(?:${a[c.NUMERICIDENTIFIERLOOSE]}|${a[c.NONNUMERICIDENTIFIER]})`),_("PRERELEASE",`(?:-(${a[c.PRERELEASEIDENTIFIER]}(?:\\.${a[c.PRERELEASEIDENTIFIER]})*))`),_("PRERELEASELOOSE",`(?:-?(${a[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[c.PRERELEASEIDENTIFIERLOOSE]})*))`),_("BUILDIDENTIFIER",`${u}+`),_("BUILD",`(?:\\+(${a[c.BUILDIDENTIFIER]}(?:\\.${a[c.BUILDIDENTIFIER]})*))`),_("FULLPLAIN",`v?${a[c.MAINVERSION]}${a[c.PRERELEASE]}?${a[c.BUILD]}?`),_("FULL",`^${a[c.FULLPLAIN]}$`),_("LOOSEPLAIN",`[v=\\s]*${a[c.MAINVERSIONLOOSE]}${a[c.PRERELEASELOOSE]}?${a[c.BUILD]}?`),_("LOOSE",`^${a[c.LOOSEPLAIN]}$`),_("GTLT","((?:<|>)?=?)"),_("XRANGEIDENTIFIERLOOSE",`${a[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),_("XRANGEIDENTIFIER",`${a[c.NUMERICIDENTIFIER]}|x|X|\\*`),_("XRANGEPLAIN",`[v=\\s]*(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:\\.(${a[c.XRANGEIDENTIFIER]})(?:${a[c.PRERELEASE]})?${a[c.BUILD]}?)?)?`),_("XRANGEPLAINLOOSE",`[v=\\s]*(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[c.XRANGEIDENTIFIERLOOSE]})(?:${a[c.PRERELEASELOOSE]})?${a[c.BUILD]}?)?)?`),_("XRANGE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAIN]}$`),_("XRANGELOOSE",`^${a[c.GTLT]}\\s*${a[c.XRANGEPLAINLOOSE]}$`),_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),_("COERCE",`${a[c.COERCEPLAIN]}(?:$|[^\\d])`),_("COERCEFULL",a[c.COERCEPLAIN]+`(?:${a[c.PRERELEASE]})?(?:${a[c.BUILD]})?(?:$|[^\\d])`),_("COERCERTL",a[c.COERCE],!0),_("COERCERTLFULL",a[c.COERCEFULL],!0),_("LONETILDE","(?:~>?)"),_("TILDETRIM",`(\\s*)${a[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",_("TILDE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAIN]}$`),_("TILDELOOSE",`^${a[c.LONETILDE]}${a[c.XRANGEPLAINLOOSE]}$`),_("LONECARET","(?:\\^)"),_("CARETTRIM",`(\\s*)${a[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",_("CARET",`^${a[c.LONECARET]}${a[c.XRANGEPLAIN]}$`),_("CARETLOOSE",`^${a[c.LONECARET]}${a[c.XRANGEPLAINLOOSE]}$`),_("COMPARATORLOOSE",`^${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]})$|^$`),_("COMPARATOR",`^${a[c.GTLT]}\\s*(${a[c.FULLPLAIN]})$|^$`),_("COMPARATORTRIM",`(\\s*)${a[c.GTLT]}\\s*(${a[c.LOOSEPLAIN]}|${a[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",_("HYPHENRANGE",`^\\s*(${a[c.XRANGEPLAIN]})\\s+-\\s+(${a[c.XRANGEPLAIN]})\\s*$`),_("HYPHENRANGELOOSE",`^\\s*(${a[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[c.XRANGEPLAINLOOSE]})\\s*$`),_("STAR","(<|>)?=?\\s*\\*"),_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(xr,xr.exports);var Ue=xr.exports;const ba=Object.freeze({loose:!0}),va=Object.freeze({}),$a=e=>e?typeof e!="object"?ba:e:va;var cn=$a;const hs=/^[0-9]+$/,Ji=(e,t)=>{const r=hs.test(e),n=hs.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},wa=(e,t)=>Ji(t,e);var Ui={compareIdentifiers:Ji,rcompareIdentifiers:wa};const Ye=pt,{MAX_LENGTH:ds,MAX_SAFE_INTEGER:Qe}=_t,{safeRe:_s,t:ps}=Ue,Ra=cn,{compareIdentifiers:be}=Ui;let Sa=class oe{constructor(t,r){if(r=Ra(r),t instanceof oe){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>ds)throw new TypeError(`version is longer than ${ds} characters`);Ye("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?_s[ps.LOOSE]:_s[ps.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Qe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Qe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Qe||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<Qe)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ye("SemVer.compare",this.version,this.options,t),!(t instanceof oe)){if(typeof t=="string"&&t===this.version)return 0;t=new oe(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof oe||(t=new oe(t,this.options)),be(this.major,t.major)||be(this.minor,t.minor)||be(this.patch,t.patch)}comparePre(t){if(t instanceof oe||(t=new oe(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],s=t.prerelease[r];if(Ye("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return be(n,s)}while(++r)}compareBuild(t){t instanceof oe||(t=new oe(t,this.options));let r=0;do{const n=this.build[r],s=t.build[r];if(Ye("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return be(n,s)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),be(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Q=Sa;const ms=Q,Ia=(e,t,r=!1)=>{if(e instanceof ms)return e;try{return new ms(e,t)}catch(n){if(!r)return null;throw n}};var ke=Ia;const Ca=ke,Ta=(e,t)=>{const r=Ca(e,t);return r?r.version:null};var ka=Ta;const Na=ke,La=(e,t)=>{const r=Na(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var Aa=La;const gs=Q,Oa=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new gs(e instanceof gs?e.version:e,r).inc(t,n,s).version}catch{return null}};var Ba=Oa;const ys=ke,Fa=(e,t)=>{const r=ys(e,null,!0),n=ys(t,null,!0),s=r.compare(n);if(s===0)return null;const i=s>0,o=i?r:n,l=i?n:r,a=!!o.prerelease.length;if(!!l.prerelease.length&&!a)return!l.patch&&!l.minor?"major":o.patch?"patch":o.minor?"minor":"major";const f=a?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"};var Pa=Fa;const ja=Q,Ma=(e,t)=>new ja(e,t).major;var Ha=Ma;const Va=Q,Da=(e,t)=>new Va(e,t).minor;var Ja=Da;const Ua=Q,za=(e,t)=>new Ua(e,t).patch;var xa=za;const Ga=ke,qa=(e,t)=>{const r=Ga(e,t);return r&&r.prerelease.length?r.prerelease:null};var Xa=qa;const Es=Q,Wa=(e,t,r)=>new Es(e,r).compare(new Es(t,r));var ne=Wa;const Ya=ne,Qa=(e,t,r)=>Ya(t,e,r);var Za=Qa;const Ka=ne,eu=(e,t)=>Ka(e,t,!0);var tu=eu;const bs=Q,ru=(e,t,r)=>{const n=new bs(e,r),s=new bs(t,r);return n.compare(s)||n.compareBuild(s)};var an=ru;const nu=an,su=(e,t)=>e.sort((r,n)=>nu(r,n,t));var iu=su;const ou=an,cu=(e,t)=>e.sort((r,n)=>ou(n,r,t));var au=cu;const uu=ne,lu=(e,t,r)=>uu(e,t,r)>0;var mt=lu;const fu=ne,hu=(e,t,r)=>fu(e,t,r)<0;var un=hu;const du=ne,_u=(e,t,r)=>du(e,t,r)===0;var zi=_u;const pu=ne,mu=(e,t,r)=>pu(e,t,r)!==0;var xi=mu;const gu=ne,yu=(e,t,r)=>gu(e,t,r)>=0;var ln=yu;const Eu=ne,bu=(e,t,r)=>Eu(e,t,r)<=0;var fn=bu;const vu=zi,$u=xi,wu=mt,Ru=ln,Su=un,Iu=fn,Cu=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return vu(e,r,n);case"!=":return $u(e,r,n);case">":return wu(e,r,n);case">=":return Ru(e,r,n);case"<":return Su(e,r,n);case"<=":return Iu(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var Gi=Cu;const Tu=Q,ku=ke,{safeRe:Ze,t:Ke}=Ue,Nu=(e,t)=>{if(e instanceof Tu)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Ze[Ke.COERCEFULL]:Ze[Ke.COERCE]);else{const a=t.includePrerelease?Ze[Ke.COERCERTLFULL]:Ze[Ke.COERCERTL];let c;for(;(c=a.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),a.lastIndex=c.index+c[1].length+c[2].length;a.lastIndex=-1}if(r===null)return null;const n=r[2],s=r[3]||"0",i=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",l=t.includePrerelease&&r[6]?`+${r[6]}`:"";return ku(`${n}.${s}.${i}${o}${l}`,t)};var Lu=Nu;class Au{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.has(t)?(this.map.delete(t),!0):!1}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}}var Ou=Au,Sr,vs;function se(){if(vs)return Sr;vs=1;class e{constructor(m,S){if(S=n(S),m instanceof e)return m.loose===!!S.loose&&m.includePrerelease===!!S.includePrerelease?m:new e(m.raw,S);if(m instanceof s)return this.raw=m.value,this.set=[[m]],this.format(),this;if(this.options=S,this.loose=!!S.loose,this.includePrerelease=!!S.includePrerelease,this.raw=m.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(w=>this.parseRange(w.trim())).filter(w=>w.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const w=this.set[0];if(this.set=this.set.filter(R=>!_(R[0])),this.set.length===0)this.set=[w];else if(this.set.length>1){for(const R of this.set)if(R.length===1&&T(R[0])){this.set=[R];break}}}this.format()}format(){return this.range=this.set.map(m=>m.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(m){const w=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+m,R=r.get(w);if(R)return R;const E=this.options.loose,C=E?l[a.HYPHENRANGELOOSE]:l[a.HYPHENRANGE];m=m.replace(C,_e(this.options.includePrerelease)),i("hyphen replace",m),m=m.replace(l[a.COMPARATORTRIM],c),i("comparator trim",m),m=m.replace(l[a.TILDETRIM],f),i("tilde trim",m),m=m.replace(l[a.CARETTRIM],u),i("caret trim",m);let B=m.split(" ").map(V=>$(V,this.options)).join(" ").split(/\s+/).map(V=>x(V,this.options));E&&(B=B.filter(V=>(i("loose invalid filter",V,this.options),!!V.match(l[a.COMPARATORLOOSE])))),i("range list",B);const k=new Map,P=B.map(V=>new s(V,this.options));for(const V of P){if(_(V))return[V];k.set(V.value,V)}k.size>1&&k.has("")&&k.delete("");const W=[...k.values()];return r.set(w,W),W}intersects(m,S){if(!(m instanceof e))throw new TypeError("a Range is required");return this.set.some(w=>v(w,S)&&m.set.some(R=>v(R,S)&&w.every(E=>R.every(C=>E.intersects(C,S)))))}test(m){if(!m)return!1;if(typeof m=="string")try{m=new o(m,this.options)}catch{return!1}for(let S=0;S<this.set.length;S++)if(Xe(this.set[S],m,this.options))return!0;return!1}}Sr=e;const t=Ou,r=new t,n=cn,s=gt(),i=pt,o=Q,{safeRe:l,t:a,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:u}=Ue,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=_t,_=y=>y.value==="<0.0.0-0",T=y=>y.value==="",v=(y,m)=>{let S=!0;const w=y.slice();let R=w.pop();for(;S&&w.length;)S=w.every(E=>R.intersects(E,m)),R=w.pop();return S},$=(y,m)=>(i("comp",y,m),y=g(y,m),i("caret",y),y=b(y,m),i("tildes",y),y=q(y,m),i("xrange",y),y=H(y,m),i("stars",y),y),p=y=>!y||y.toLowerCase()==="x"||y==="*",b=(y,m)=>y.trim().split(/\s+/).map(S=>A(S,m)).join(" "),A=(y,m)=>{const S=m.loose?l[a.TILDELOOSE]:l[a.TILDE];return y.replace(S,(w,R,E,C,B)=>{i("tilde",y,w,R,E,C,B);let k;return p(R)?k="":p(E)?k=`>=${R}.0.0 <${+R+1}.0.0-0`:p(C)?k=`>=${R}.${E}.0 <${R}.${+E+1}.0-0`:B?(i("replaceTilde pr",B),k=`>=${R}.${E}.${C}-${B} <${R}.${+E+1}.0-0`):k=`>=${R}.${E}.${C} <${R}.${+E+1}.0-0`,i("tilde return",k),k})},g=(y,m)=>y.trim().split(/\s+/).map(S=>L(S,m)).join(" "),L=(y,m)=>{i("caret",y,m);const S=m.loose?l[a.CARETLOOSE]:l[a.CARET],w=m.includePrerelease?"-0":"";return y.replace(S,(R,E,C,B,k)=>{i("caret",y,R,E,C,B,k);let P;return p(E)?P="":p(C)?P=`>=${E}.0.0${w} <${+E+1}.0.0-0`:p(B)?E==="0"?P=`>=${E}.${C}.0${w} <${E}.${+C+1}.0-0`:P=`>=${E}.${C}.0${w} <${+E+1}.0.0-0`:k?(i("replaceCaret pr",k),E==="0"?C==="0"?P=`>=${E}.${C}.${B}-${k} <${E}.${C}.${+B+1}-0`:P=`>=${E}.${C}.${B}-${k} <${E}.${+C+1}.0-0`:P=`>=${E}.${C}.${B}-${k} <${+E+1}.0.0-0`):(i("no pr"),E==="0"?C==="0"?P=`>=${E}.${C}.${B}${w} <${E}.${C}.${+B+1}-0`:P=`>=${E}.${C}.${B}${w} <${E}.${+C+1}.0-0`:P=`>=${E}.${C}.${B} <${+E+1}.0.0-0`),i("caret return",P),P})},q=(y,m)=>(i("replaceXRanges",y,m),y.split(/\s+/).map(S=>U(S,m)).join(" ")),U=(y,m)=>{y=y.trim();const S=m.loose?l[a.XRANGELOOSE]:l[a.XRANGE];return y.replace(S,(w,R,E,C,B,k)=>{i("xRange",y,w,R,E,C,B,k);const P=p(E),W=P||p(C),V=W||p(B),de=V;return R==="="&&de&&(R=""),k=m.includePrerelease?"-0":"",P?R===">"||R==="<"?w="<0.0.0-0":w="*":R&&de?(W&&(C=0),B=0,R===">"?(R=">=",W?(E=+E+1,C=0,B=0):(C=+C+1,B=0)):R==="<="&&(R="<",W?E=+E+1:C=+C+1),R==="<"&&(k="-0"),w=`${R+E}.${C}.${B}${k}`):W?w=`>=${E}.0.0${k} <${+E+1}.0.0-0`:V&&(w=`>=${E}.${C}.0${k} <${E}.${+C+1}.0-0`),i("xRange return",w),w})},H=(y,m)=>(i("replaceStars",y,m),y.trim().replace(l[a.STAR],"")),x=(y,m)=>(i("replaceGTE0",y,m),y.trim().replace(l[m.includePrerelease?a.GTE0PRE:a.GTE0],"")),_e=y=>(m,S,w,R,E,C,B,k,P,W,V,de)=>(p(w)?S="":p(R)?S=`>=${w}.0.0${y?"-0":""}`:p(E)?S=`>=${w}.${R}.0${y?"-0":""}`:C?S=`>=${S}`:S=`>=${S}${y?"-0":""}`,p(P)?k="":p(W)?k=`<${+P+1}.0.0-0`:p(V)?k=`<${P}.${+W+1}.0-0`:de?k=`<=${P}.${W}.${V}-${de}`:y?k=`<${P}.${W}.${+V+1}-0`:k=`<=${k}`,`${S} ${k}`.trim()),Xe=(y,m,S)=>{for(let w=0;w<y.length;w++)if(!y[w].test(m))return!1;if(m.prerelease.length&&!S.includePrerelease){for(let w=0;w<y.length;w++)if(i(y[w].semver),y[w].semver!==s.ANY&&y[w].semver.prerelease.length>0){const R=y[w].semver;if(R.major===m.major&&R.minor===m.minor&&R.patch===m.patch)return!0}return!1}return!0};return Sr}var Ir,$s;function gt(){if($s)return Ir;$s=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,u){if(u=r(u),f instanceof t){if(f.loose===!!u.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),o("comparator",f,u),this.options=u,this.loose=!!u.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(f){const u=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],d=f.match(u);if(!d)throw new TypeError(`Invalid comparator: ${f}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new l(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(o("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new l(f,this.options)}catch{return!1}return i(f,this.operator,this.semver,this.options)}intersects(f,u){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(f.value,u).test(this.value):f.operator===""?f.value===""?!0:new a(this.value,u).test(f.semver):(u=r(u),u.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||i(this.semver,"<",f.semver,u)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||i(this.semver,">",f.semver,u)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}Ir=t;const r=cn,{safeRe:n,t:s}=Ue,i=Gi,o=pt,l=Q,a=se();return Ir}const Bu=se(),Fu=(e,t,r)=>{try{t=new Bu(t,r)}catch{return!1}return t.test(e)};var yt=Fu;const Pu=se(),ju=(e,t)=>new Pu(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var Mu=ju;const Hu=Q,Vu=se(),Du=(e,t,r)=>{let n=null,s=null,i=null;try{i=new Vu(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Hu(n,r))}),n};var Ju=Du;const Uu=Q,zu=se(),xu=(e,t,r)=>{let n=null,s=null,i=null;try{i=new zu(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new Uu(n,r))}),n};var Gu=xu;const Cr=Q,qu=se(),ws=mt,Xu=(e,t)=>{e=new qu(e,t);let r=new Cr("0.0.0");if(e.test(r)||(r=new Cr("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const s=e.set[n];let i=null;s.forEach(o=>{const l=new Cr(o.semver.version);switch(o.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!i||ws(l,i))&&(i=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||ws(r,i))&&(r=i)}return r&&e.test(r)?r:null};var Wu=Xu;const Yu=se(),Qu=(e,t)=>{try{return new Yu(e,t).range||"*"}catch{return null}};var Zu=Qu;const Ku=Q,qi=gt(),{ANY:el}=qi,tl=se(),rl=yt,Rs=mt,Ss=un,nl=fn,sl=ln,il=(e,t,r,n)=>{e=new Ku(e,n),t=new tl(t,n);let s,i,o,l,a;switch(r){case">":s=Rs,i=nl,o=Ss,l=">",a=">=";break;case"<":s=Ss,i=sl,o=Rs,l="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rl(e,t,n))return!1;for(let c=0;c<t.set.length;++c){const f=t.set[c];let u=null,d=null;if(f.forEach(h=>{h.semver===el&&(h=new qi(">=0.0.0")),u=u||h,d=d||h,s(h.semver,u.semver,n)?u=h:o(h.semver,d.semver,n)&&(d=h)}),u.operator===l||u.operator===a||(!d.operator||d.operator===l)&&i(e,d.semver))return!1;if(d.operator===a&&o(e,d.semver))return!1}return!0};var hn=il;const ol=hn,cl=(e,t,r)=>ol(e,t,">",r);var al=cl;const ul=hn,ll=(e,t,r)=>ul(e,t,"<",r);var fl=ll;const Is=se(),hl=(e,t,r)=>(e=new Is(e,r),t=new Is(t,r),e.intersects(t,r));var dl=hl;const _l=yt,pl=ne;var ml=(e,t,r)=>{const n=[];let s=null,i=null;const o=e.sort((f,u)=>pl(f,u,r));for(const f of o)_l(f,t,r)?(i=f,s||(s=f)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const l=[];for(const[f,u]of n)f===u?l.push(f):!u&&f===o[0]?l.push("*"):u?f===o[0]?l.push(`<=${u}`):l.push(`${f} - ${u}`):l.push(`>=${f}`);const a=l.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return a.length<c.length?a:t};const Cs=se(),dn=gt(),{ANY:Tr}=dn,Ne=yt,_n=ne,gl=(e,t,r={})=>{if(e===t)return!0;e=new Cs(e,r),t=new Cs(t,r);let n=!1;e:for(const s of e.set){for(const i of t.set){const o=El(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},yl=[new dn(">=0.0.0-0")],Ts=[new dn(">=0.0.0")],El=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Tr){if(t.length===1&&t[0].semver===Tr)return!0;r.includePrerelease?e=yl:e=Ts}if(t.length===1&&t[0].semver===Tr){if(r.includePrerelease)return!0;t=Ts}const n=new Set;let s,i;for(const h of e)h.operator===">"||h.operator===">="?s=ks(s,h,r):h.operator==="<"||h.operator==="<="?i=Ns(i,h,r):n.add(h.semver);if(n.size>1)return null;let o;if(s&&i){if(o=_n(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const h of n){if(s&&!Ne(h,String(s),r)||i&&!Ne(h,String(i),r))return null;for(const _ of t)if(!Ne(h,String(_),r))return!1;return!0}let l,a,c,f,u=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,d=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;u&&u.prerelease.length===1&&i.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(const h of t){if(f=f||h.operator===">"||h.operator===">=",c=c||h.operator==="<"||h.operator==="<=",s){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator===">"||h.operator===">="){if(l=ks(s,h,r),l===h&&l!==s)return!1}else if(s.operator===">="&&!Ne(s.semver,String(h),r))return!1}if(i){if(u&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===u.major&&h.semver.minor===u.minor&&h.semver.patch===u.patch&&(u=!1),h.operator==="<"||h.operator==="<="){if(a=Ns(i,h,r),a===h&&a!==i)return!1}else if(i.operator==="<="&&!Ne(i.semver,String(h),r))return!1}if(!h.operator&&(i||s)&&o!==0)return!1}return!(s&&c&&!i&&o!==0||i&&f&&!s&&o!==0||d||u)},ks=(e,t,r)=>{if(!e)return t;const n=_n(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Ns=(e,t,r)=>{if(!e)return t;const n=_n(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var bl=gl;const kr=Ue,Ls=_t,vl=Q,As=Ui,$l=ke,wl=ka,Rl=Aa,Sl=Ba,Il=Pa,Cl=Ha,Tl=Ja,kl=xa,Nl=Xa,Ll=ne,Al=Za,Ol=tu,Bl=an,Fl=iu,Pl=au,jl=mt,Ml=un,Hl=zi,Vl=xi,Dl=ln,Jl=fn,Ul=Gi,zl=Lu,xl=gt(),Gl=se(),ql=yt,Xl=Mu,Wl=Ju,Yl=Gu,Ql=Wu,Zl=Zu,Kl=hn,ef=al,tf=fl,rf=dl,nf=ml,sf=bl;var of={parse:$l,valid:wl,clean:Rl,inc:Sl,diff:Il,major:Cl,minor:Tl,patch:kl,prerelease:Nl,compare:Ll,rcompare:Al,compareLoose:Ol,compareBuild:Bl,sort:Fl,rsort:Pl,gt:jl,lt:Ml,eq:Hl,neq:Vl,gte:Dl,lte:Jl,cmp:Ul,coerce:zl,Comparator:xl,Range:Gl,satisfies:ql,toComparators:Xl,maxSatisfying:Wl,minSatisfying:Yl,minVersion:Ql,validRange:Zl,outside:Kl,gtr:ef,ltr:tf,intersects:rf,simplifyRange:nf,subset:sf,SemVer:vl,re:kr.re,src:kr.src,tokens:kr.t,SEMVER_SPEC_VERSION:Ls.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ls.RELEASE_TYPES,compareIdentifiers:As.compareIdentifiers,rcompareIdentifiers:As.rcompareIdentifiers};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=of,r=Ee,n=X;e.VersionStruct=(0,r.refine)((0,r.string)(),"Version",u=>(0,t.valid)(u)===null?`Expected SemVer version, got "${u}"`:!0),e.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",u=>(0,t.validRange)(u)===null?`Expected SemVer range, got "${u}"`:!0);function s(u){return(0,r.is)(u,e.VersionStruct)}e.isValidSemVerVersion=s;function i(u){return(0,r.is)(u,e.VersionRangeStruct)}e.isValidSemVerRange=i;function o(u){(0,n.assertStruct)(u,e.VersionStruct)}e.assertIsSemVerVersion=o;function l(u){(0,n.assertStruct)(u,e.VersionRangeStruct)}e.assertIsSemVerRange=l;function a(u,d){return(0,t.gt)(u,d)}e.gtVersion=a;function c(u,d){return(0,t.gtr)(u,d)}e.gtRange=c;function f(u,d){return(0,t.satisfies)(u,d,{includePrerelease:!0})}e.satisfiesVersionRange=f})(Vi);(function(e){var t=j&&j.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var l=Object.getOwnPropertyDescriptor(s,i);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,l)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=j&&j.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(X,e),r(De,e),r(O,e),r(ht,e),r(ce,e),r(Re,e),r(Oi,e),r(Je,e),r(Bi,e),r(Fi,e),r(Se,e),r(Pi,e),r(ae,e),r(ji,e),r(Mi,e),r(Hi,e),r(Vi,e)})(_i);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createModuleLogger=e.projectLogger=void 0;const t=_i;Object.defineProperty(e,"createModuleLogger",{enumerable:!0,get:function(){return t.createModuleLogger}}),e.projectLogger=(0,t.createProjectLogger)("eth-block-tracker")})(di);var Xi=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});lt.PollingBlockTracker=void 0;const cf=Xi(Qr),af=Xi(Ao),uf=je,Os=di,Bs=(0,Os.createModuleLogger)(Os.projectLogger,"polling-block-tracker"),lf=(0,cf.default)(),ff=1e3;class hf extends uf.BaseBlockTracker{constructor(t={}){var r;if(!t.provider)throw new Error("PollingBlockTracker - no provider specified.");super(Object.assign(Object.assign({},t),{blockResetDuration:(r=t.blockResetDuration)!==null&&r!==void 0?r:t.pollingInterval})),this._provider=t.provider,this._pollingInterval=t.pollingInterval||20*ff,this._retryTimeout=t.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=t.keepEventLoopActive===void 0?!0:t.keepEventLoopActive,this._setSkipCacheFlag=t.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var t;this._isRunning;)try{await this._updateLatestBlock();const r=Fs(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await r}catch(r){const n=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${(t=r.stack)!==null&&t!==void 0?t:r}`);try{this.emit("error",n)}catch{console.error(n)}const s=Fs(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await s}}async _updateLatestBlock(){const t=await this._fetchLatestBlock();this._newPotentialLatest(t)}async _fetchLatestBlock(){const t={jsonrpc:"2.0",id:lf(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(t.skipCache=!0),Bs("Making request",t);const r=await(0,af.default)(n=>this._provider.sendAsync(t,n))();if(Bs("Got response",r),r.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${r.error.message}`);return r.result}}lt.PollingBlockTracker=hf;function Fs(e,t){return new Promise(r=>{const n=setTimeout(r,e);n.unref&&t&&n.unref()})}var Et={},df=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Et,"__esModule",{value:!0});Et.SubscribeBlockTracker=void 0;const _f=df(Qr),pf=je,mf=(0,_f.default)();class gf extends pf.BaseBlockTracker{constructor(t={}){if(!t.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(t),this._provider=t.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(this._subscriptionId===void 0||this._subscriptionId===null)try{const t=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(t)}catch(t){this.emit("error",t)}}async _end(){if(this._subscriptionId!==null&&this._subscriptionId!==void 0)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(t){this.emit("error",t)}}_call(t,...r){return new Promise((n,s)=>{this._provider.sendAsync({id:mf(),method:t,params:r,jsonrpc:"2.0"},(i,o)=>{i?s(i):n(o.result)})})}_handleSubData(t,r){var n;r.method==="eth_subscription"&&((n=r.params)===null||n===void 0?void 0:n.subscription)===this._subscriptionId&&this._newPotentialLatest(r.params.result.number)}}Et.SubscribeBlockTracker=gf;(function(e){var t=j&&j.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i),Object.defineProperty(n,o,{enumerable:!0,get:function(){return s[i]}})}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=j&&j.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(lt,e),r(Et,e)})(No);var pn={},bt={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.getUniqueId=void 0;const Wi=4294967295;let Nr=Math.floor(Math.random()*Wi);function yf(){return Nr=(Nr+1)%Wi,Nr}ze.getUniqueId=yf;Object.defineProperty(bt,"__esModule",{value:!0});bt.createIdRemapMiddleware=void 0;const Ef=ze;function bf(){return(e,t,r,n)=>{const s=e.id,i=Ef.getUniqueId();e.id=i,t.id=i,r(o=>{e.id=s,t.id=s,o()})}}bt.createIdRemapMiddleware=bf;var vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.createAsyncMiddleware=void 0;function vf(e){return async(t,r,n,s)=>{let i;const o=new Promise(f=>{i=f});let l=null,a=!1;const c=async()=>{a=!0,n(f=>{l=f,i()}),await o};try{await e(t,r,c),a?(await o,l(null)):s(null)}catch(f){l?l(f):s(f)}}}vt.createAsyncMiddleware=vf;var $t={};Object.defineProperty($t,"__esModule",{value:!0});$t.createScaffoldMiddleware=void 0;function $f(e){return(t,r,n,s)=>{const i=e[t.method];return i===void 0?n():typeof i=="function"?i(t,r,n,s):(r.result=i,s())}}$t.createScaffoldMiddleware=$f;var xe={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});const wf=xs;function Ps(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function Rf(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}let Sf=class extends wf.EventEmitter{emit(t,...r){let n=t==="error";const s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){let o;if(r.length>0&&([o]=r),o instanceof Error)throw o;const l=new Error(`Unhandled error.${o?` (${o.message})`:""}`);throw l.context=o,l}const i=s[t];if(i===void 0)return!1;if(typeof i=="function")Ps(i,this,r);else{const o=i.length,l=Rf(i);for(let a=0;a<o;a+=1)Ps(l[a],this,r)}return!0}};mn.default=Sf;var If=j&&j.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xe,"__esModule",{value:!0});xe.JsonRpcEngine=void 0;const Cf=If(mn),ee=Ki;class ue extends Cf.default{constructor(){super(),this._middleware=[]}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,s)=>{try{const[i,o,l]=await ue._runAllMiddleware(t,r,this._middleware);return o?(await ue._runReturnHandlers(l),s(i)):n(async a=>{try{await ue._runReturnHandlers(l)}catch(c){return a(c)}return a()})}catch(i){return s(i)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise(r=>{this._handle(t,(n,s)=>{r(s)})})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const o=new ee.EthereumRpcError(ee.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof t}`,{request:t});return r(o,{id:void 0,jsonrpc:"2.0",error:o})}if(typeof t.method!="string"){const o=new ee.EthereumRpcError(ee.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof t.method}`,{request:t});return r(o,{id:t.id,jsonrpc:"2.0",error:o})}const n=Object.assign({},t),s={id:n.id,jsonrpc:n.jsonrpc};let i=null;try{await this._processRequest(n,s)}catch(o){i=o}return i&&(delete s.result,s.error||(s.error=ee.serializeError(i))),r(i,s)}async _processRequest(t,r){const[n,s,i]=await ue._runAllMiddleware(t,r,this._middleware);if(ue._checkForCompletion(t,r,s),await ue._runReturnHandlers(i),n)throw n}static async _runAllMiddleware(t,r,n){const s=[];let i=null,o=!1;for(const l of n)if([i,o]=await ue._runMiddleware(t,r,l,s),o)break;return[i,o,s.reverse()]}static _runMiddleware(t,r,n,s){return new Promise(i=>{const o=a=>{const c=a||r.error;c&&(r.error=ee.serializeError(c)),i([c,!0])},l=a=>{r.error?o(r.error):(a&&(typeof a!="function"&&o(new ee.EthereumRpcError(ee.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof a}" for request:
${Lr(t)}`,{request:t})),s.push(a)),i([null,!1]))};try{n(t,r,l,o)}catch(a){o(a)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,s)=>{r(i=>i?s(i):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new ee.EthereumRpcError(ee.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${Lr(t)}`,{request:t});if(!n)throw new ee.EthereumRpcError(ee.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${Lr(t)}`,{request:t})}}xe.JsonRpcEngine=ue;function Lr(e){return JSON.stringify(e,null,2)}var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.mergeMiddleware=void 0;const Tf=xe;function kf(e){const t=new Tf.JsonRpcEngine;return e.forEach(r=>t.push(r)),t.asMiddleware()}wt.mergeMiddleware=kf;(function(e){var t=j&&j.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i),Object.defineProperty(n,o,{enumerable:!0,get:function(){return s[i]}})}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=j&&j.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(bt,e),r(vt,e),r($t,e),r(ze,e),r(xe,e),r(wt,e)})(pn);var Yi={},gn={};const yn=at(eo);var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});var js=yn,Nf=function(){function e(t){if(this._maxConcurrency=t,this._queue=[],t<=0)throw new Error("semaphore must be initialized to a positive value");this._value=t}return e.prototype.acquire=function(){var t=this,r=this.isLocked(),n=new Promise(function(s){return t._queue.push(s)});return r||this._dispatch(),n},e.prototype.runExclusive=function(t){return js.__awaiter(this,void 0,void 0,function(){var r,n,s;return js.__generator(this,function(i){switch(i.label){case 0:return[4,this.acquire()];case 1:r=i.sent(),n=r[0],s=r[1],i.label=2;case 2:return i.trys.push([2,,4,5]),[4,t(n)];case 3:return[2,i.sent()];case 4:return s(),[7];case 5:return[2]}})})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var t=this._currentReleaser;this._currentReleaser=void 0,t()}},e.prototype._dispatch=function(){var t=this,r=this._queue.shift();if(r){var n=!1;this._currentReleaser=function(){n||(n=!0,t._value++,t._dispatch())},r([this._value--,this._currentReleaser])}},e}();Rt.default=Nf;Object.defineProperty(gn,"__esModule",{value:!0});var Ms=yn,Lf=Rt,Af=function(){function e(){this._semaphore=new Lf.default(1)}return e.prototype.acquire=function(){return Ms.__awaiter(this,void 0,void 0,function(){var t,r;return Ms.__generator(this,function(n){switch(n.label){case 0:return[4,this._semaphore.acquire()];case 1:return t=n.sent(),r=t[1],[2,r]}})})},e.prototype.runExclusive=function(t){return this._semaphore.runExclusive(function(){return t()})},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();gn.default=Af;var St={};Object.defineProperty(St,"__esModule",{value:!0});St.withTimeout=void 0;var et=yn;function Of(e,t,r){var n=this;return r===void 0&&(r=new Error("timeout")),{acquire:function(){return new Promise(function(s,i){return et.__awaiter(n,void 0,void 0,function(){var o,l,a;return et.__generator(this,function(c){switch(c.label){case 0:return o=!1,setTimeout(function(){o=!0,i(r)},t),[4,e.acquire()];case 1:return l=c.sent(),o?(a=Array.isArray(l)?l[1]:l,a()):s(l),[2]}})})})},runExclusive:function(s){return et.__awaiter(this,void 0,void 0,function(){var i,o;return et.__generator(this,function(l){switch(l.label){case 0:i=function(){},l.label=1;case 1:return l.trys.push([1,,7,8]),[4,this.acquire()];case 2:return o=l.sent(),Array.isArray(o)?(i=o[1],[4,s(o[0])]):[3,4];case 3:return[2,l.sent()];case 4:return i=o,[4,s()];case 5:return[2,l.sent()];case 6:return[3,8];case 7:return i(),[7];case 8:return[2]}})})},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}St.withTimeout=Of;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.withTimeout=e.Semaphore=e.Mutex=void 0;var t=gn;Object.defineProperty(e,"Mutex",{enumerable:!0,get:function(){return t.default}});var r=Rt;Object.defineProperty(e,"Semaphore",{enumerable:!0,get:function(){return r.default}});var n=St;Object.defineProperty(e,"withTimeout",{enumerable:!0,get:function(){return n.withTimeout}})})(Yi);var Bf=Pf,Ff=Object.prototype.hasOwnProperty;function Pf(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)Ff.call(r,n)&&(e[n]=r[n])}return e}const jf=Bf,Mf=Qr();var Hf=I;function I(e){const t=this;t.currentProvider=e}I.prototype.getBalance=Ge(2,"eth_getBalance");I.prototype.getCode=Ge(2,"eth_getCode");I.prototype.getTransactionCount=Ge(2,"eth_getTransactionCount");I.prototype.getStorageAt=Ge(3,"eth_getStorageAt");I.prototype.call=Ge(2,"eth_call");I.prototype.protocolVersion=N("eth_protocolVersion");I.prototype.syncing=N("eth_syncing");I.prototype.coinbase=N("eth_coinbase");I.prototype.mining=N("eth_mining");I.prototype.hashrate=N("eth_hashrate");I.prototype.gasPrice=N("eth_gasPrice");I.prototype.accounts=N("eth_accounts");I.prototype.blockNumber=N("eth_blockNumber");I.prototype.getBlockTransactionCountByHash=N("eth_getBlockTransactionCountByHash");I.prototype.getBlockTransactionCountByNumber=N("eth_getBlockTransactionCountByNumber");I.prototype.getUncleCountByBlockHash=N("eth_getUncleCountByBlockHash");I.prototype.getUncleCountByBlockNumber=N("eth_getUncleCountByBlockNumber");I.prototype.sign=N("eth_sign");I.prototype.sendTransaction=N("eth_sendTransaction");I.prototype.sendRawTransaction=N("eth_sendRawTransaction");I.prototype.estimateGas=N("eth_estimateGas");I.prototype.getBlockByHash=N("eth_getBlockByHash");I.prototype.getBlockByNumber=N("eth_getBlockByNumber");I.prototype.getTransactionByHash=N("eth_getTransactionByHash");I.prototype.getTransactionByBlockHashAndIndex=N("eth_getTransactionByBlockHashAndIndex");I.prototype.getTransactionByBlockNumberAndIndex=N("eth_getTransactionByBlockNumberAndIndex");I.prototype.getTransactionReceipt=N("eth_getTransactionReceipt");I.prototype.getUncleByBlockHashAndIndex=N("eth_getUncleByBlockHashAndIndex");I.prototype.getUncleByBlockNumberAndIndex=N("eth_getUncleByBlockNumberAndIndex");I.prototype.getCompilers=N("eth_getCompilers");I.prototype.compileLLL=N("eth_compileLLL");I.prototype.compileSolidity=N("eth_compileSolidity");I.prototype.compileSerpent=N("eth_compileSerpent");I.prototype.newFilter=N("eth_newFilter");I.prototype.newBlockFilter=N("eth_newBlockFilter");I.prototype.newPendingTransactionFilter=N("eth_newPendingTransactionFilter");I.prototype.uninstallFilter=N("eth_uninstallFilter");I.prototype.getFilterChanges=N("eth_getFilterChanges");I.prototype.getFilterLogs=N("eth_getFilterLogs");I.prototype.getLogs=N("eth_getLogs");I.prototype.getWork=N("eth_getWork");I.prototype.submitWork=N("eth_submitWork");I.prototype.submitHashrate=N("eth_submitHashrate");I.prototype.sendAsync=function(e,t){this.currentProvider.sendAsync(Vf(e),function(n,s){if(!n&&s.error&&(n=new Error("EthQuery - RPC Error - "+s.error.message)),n)return t(n);t(null,s.result)})};function N(e){return function(){const t=this;var r=[].slice.call(arguments),n=r.pop();t.sendAsync({method:e,params:r},n)}}function Ge(e,t){return function(){const r=this;var n=[].slice.call(arguments),s=n.pop();n.length<e&&n.push("latest"),r.sendAsync({method:t,params:n},s)}}function Vf(e){return jf({id:Mf(),jsonrpc:"2.0",params:[]},e)}const Hs=(e,t,r,n)=>function(...s){const i=t.promiseModule;return new i((o,l)=>{t.multiArgs?s.push((...c)=>{t.errorFirst?c[0]?l(c):(c.shift(),o(c)):o(c)}):t.errorFirst?s.push((c,f)=>{c?l(c):o(f)}):s.push(o),Reflect.apply(e,this===r?n:this,s)})},Vs=new WeakMap;var Df=(e,t)=>{t={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...t};const r=typeof e;if(!(e!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${e===null?"null":r}\``);const n=(o,l)=>{let a=Vs.get(o);if(a||(a={},Vs.set(o,a)),l in a)return a[l];const c=_=>typeof _=="string"||typeof l=="symbol"?l===_:_.test(l),f=Reflect.getOwnPropertyDescriptor(o,l),u=f===void 0||f.writable||f.configurable,h=(t.include?t.include.some(c):!t.exclude.some(c))&&u;return a[l]=h,h},s=new WeakMap,i=new Proxy(e,{apply(o,l,a){const c=s.get(o);if(c)return Reflect.apply(c,l,a);const f=t.excludeMain?o:Hs(o,t,i,o);return s.set(o,f),Reflect.apply(f,l,a)},get(o,l){const a=o[l];if(!n(o,l)||a===Function.prototype[l])return a;const c=s.get(a);if(c)return c;if(typeof a=="function"){const f=Hs(a,t,i,o);return s.set(a,f),f}return a}});return i};const Jf=Me.default;let Uf=class extends Jf{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(t){this.updates=this.updates.concat(t),t.forEach(r=>this.emit("update",r))}addInitialResults(t){}getChangesAndClear(){const t=this.updates;return this.updates=[],t}};var En=Uf;const zf=En;let xf=class extends zf{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(t){this.allResults=this.allResults.concat(t),super.addResults(t)}addInitialResults(t){this.allResults=this.allResults.concat(t),super.addInitialResults(t)}getAllResults(){return this.allResults}};var Gf=xf,qe={minBlockRef:qf,maxBlockRef:Xf,sortBlockRefs:bn,bnToHex:Wf,blockRefIsNumber:Yf,hexToInt:ct,incrementHexInt:Qf,intToHex:Qi,unsafeRandomBytes:Zf};function qf(...e){return bn(e)[0]}function Xf(...e){const t=bn(e);return t[t.length-1]}function bn(e){return e.sort((t,r)=>t==="latest"||r==="earliest"?1:r==="latest"||t==="earliest"?-1:ct(t)-ct(r))}function Wf(e){return"0x"+e.toString(16)}function Yf(e){return e&&!["earliest","latest","pending"].includes(e)}function ct(e){return e==null?e:Number.parseInt(e,16)}function Qf(e){if(e==null)return e;const t=ct(e);return Qi(t+1)}function Qi(e){if(e==null)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function Zf(e){let t="0x";for(let r=0;r<e;r++)t+=Ds(),t+=Ds();return t}function Ds(){return Math.floor(Math.random()*16).toString(16)}const Kf=Hf,eh=Df,th=Gf,{bnToHex:qh,hexToInt:tt,incrementHexInt:rh,minBlockRef:nh,blockRefIsNumber:sh}=qe;let ih=class extends th{constructor({provider:t,params:r}){super(),this.type="log",this.ethQuery=new Kf(t),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},r),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(n=>n.toLowerCase()))}async initialize({currentBlock:t}){let r=this.params.fromBlock;["latest","pending"].includes(r)&&(r=t),r==="earliest"&&(r="0x0"),this.params.fromBlock=r;const n=nh(this.params.toBlock,t),s=Object.assign({},this.params,{toBlock:n}),i=await this._fetchLogs(s);this.addInitialResults(i)}async update({oldBlock:t,newBlock:r}){const n=r;let s;t?s=rh(t):s=r;const i=Object.assign({},this.params,{fromBlock:s,toBlock:n}),l=(await this._fetchLogs(i)).filter(a=>this.matchLog(a));this.addResults(l)}async _fetchLogs(t){return await eh(n=>this.ethQuery.getLogs(t,n))()}matchLog(t){if(tt(this.params.fromBlock)>=tt(t.blockNumber)||sh(this.params.toBlock)&&tt(this.params.toBlock)<=tt(t.blockNumber))return!1;const r=t.address&&t.address.toLowerCase();return this.params.address&&r&&!this.params.address.includes(r)?!1:this.params.topics.every((s,i)=>{let o=t.topics[i];if(!o)return!1;o=o.toLowerCase();let l=Array.isArray(s)?s:[s];return l.includes(null)?!0:(l=l.map(f=>f.toLowerCase()),l.includes(o))})}};var oh=ih,vn=ch;async function ch({provider:e,fromBlock:t,toBlock:r}){t||(t=r);const n=Js(t),i=Js(r)-n+1,o=Array(i).fill().map((a,c)=>n+c).map(ah);let l=await Promise.all(o.map(a=>lh(e,"eth_getBlockByNumber",[a,!1])));return l=l.filter(a=>a!==null),l}function Js(e){return e==null?e:Number.parseInt(e,16)}function ah(e){return e==null?e:"0x"+e.toString(16)}function uh(e,t){return new Promise((r,n)=>{e.sendAsync(t,(s,i)=>{s?n(s):i.error?n(i.error):i.result?r(i.result):n(new Error("Result was empty"))})})}async function lh(e,t,r){for(let n=0;n<3;n++)try{return await uh(e,{id:1,jsonrpc:"2.0",method:t,params:r})}catch(s){console.error(`provider.sendAsync failed: ${s.stack||s.message||s}`)}return null}const fh=En,hh=vn,{incrementHexInt:dh}=qe;let _h=class extends fh{constructor({provider:t,params:r}){super(),this.type="block",this.provider=t}async update({oldBlock:t,newBlock:r}){const n=r,s=dh(t),o=(await hh({provider:this.provider,fromBlock:s,toBlock:n})).map(l=>l.hash);this.addResults(o)}};var ph=_h;const mh=En,gh=vn,{incrementHexInt:yh}=qe;let Eh=class extends mh{constructor({provider:t}){super(),this.type="tx",this.provider=t}async update({oldBlock:t}){const r=t,n=yh(t),s=await gh({provider:this.provider,fromBlock:n,toBlock:r}),i=[];for(const o of s)i.push(...o.transactions);this.addResults(i)}};var bh=Eh;const vh=Yi.Mutex,{createAsyncMiddleware:$h,createScaffoldMiddleware:wh}=pn,Rh=oh,Sh=ph,Ih=bh,{intToHex:Zi,hexToInt:Ar}=qe;var Ch=Th;function Th({blockTracker:e,provider:t}){let r=0,n={};const s=new vh,i=kh({mutex:s}),o=wh({eth_newFilter:i(Or(a)),eth_newBlockFilter:i(Or(c)),eth_newPendingTransactionFilter:i(Or(f)),eth_uninstallFilter:i(st(h)),eth_getFilterChanges:i(st(u)),eth_getFilterLogs:i(st(d))}),l=async({oldBlock:p,newBlock:b})=>{if(n.length===0)return;const A=await s.acquire();try{await Promise.all(ve(n).map(async g=>{try{await g.update({oldBlock:p,newBlock:b})}catch(L){console.error(L)}}))}catch(g){console.error(g)}A()};return o.newLogFilter=a,o.newBlockFilter=c,o.newPendingTransactionFilter=f,o.uninstallFilter=h,o.getFilterChanges=u,o.getFilterLogs=d,o.destroy=()=>{v()},o;async function a(p){const b=new Rh({provider:t,params:p});return await _(b),b}async function c(){const p=new Sh({provider:t});return await _(p),p}async function f(){const p=new Ih({provider:t});return await _(p),p}async function u(p){const b=Ar(p),A=n[b];if(!A)throw new Error(`No filter for index "${b}"`);return A.getChangesAndClear()}async function d(p){const b=Ar(p),A=n[b];if(!A)throw new Error(`No filter for index "${b}"`);let g=[];return A.type==="log"&&(g=A.getAllResults()),g}async function h(p){const b=Ar(p),g=!!n[b];return g&&await T(b),g}async function _(p){const b=ve(n).length,A=await e.getLatestBlock();await p.initialize({currentBlock:A}),r++,n[r]=p,p.id=r,p.idHex=Zi(r);const g=ve(n).length;return $({prevFilterCount:b,newFilterCount:g}),r}async function T(p){const b=ve(n).length;delete n[p];const A=ve(n).length;$({prevFilterCount:b,newFilterCount:A})}async function v(){const p=ve(n).length;n={},$({prevFilterCount:p,newFilterCount:0})}function $({prevFilterCount:p,newFilterCount:b}){if(p===0&&b>0){e.on("sync",l);return}if(p>0&&b===0){e.removeListener("sync",l);return}}}function Or(e){return st(async(...t)=>{const r=await e(...t);return Zi(r.id)})}function st(e){return $h(async(t,r)=>{const n=await e.apply(null,t.params);r.result=n})}function kh({mutex:e}){return t=>async(r,n,s,i)=>{(await e.acquire())(),t(r,n,s,i)}}function ve(e,t){const r=[];for(let n in e)r.push(e[n]);return r}const Nh=Me.default,{createAsyncMiddleware:Us,createScaffoldMiddleware:Lh}=pn,Ah=Ch,{unsafeRandomBytes:Oh,incrementHexInt:Bh}=qe,Fh=vn;var Qh=Ph;function Ph({blockTracker:e,provider:t}){const r={},n=Ah({blockTracker:e,provider:t});let s=!1;const i=new Nh,o=Lh({eth_subscribe:Us(l),eth_unsubscribe:Us(a)});return o.destroy=f,{events:i,middleware:o};async function l(u,d){if(s)throw new Error("SubscriptionManager - attempting to use after destroying");const h=u.params[0],_=Oh(16);let T;switch(h){case"newHeads":T=v({subId:_});break;case"logs":const p=u.params[1],b=await n.newLogFilter(p);T=$({subId:_,filter:b});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${h}"`)}r[_]=T,d.result=_;return;function v({subId:p}){const b={type:h,destroy:async()=>{e.removeListener("sync",b.update)},update:async({oldBlock:A,newBlock:g})=>{const L=g,q=Bh(A);(await Fh({provider:t,fromBlock:q,toBlock:L})).map(jh).filter(x=>x!==null).forEach(x=>{c(p,x)})}};return e.on("sync",b.update),b}function $({subId:p,filter:b}){return b.on("update",g=>c(p,g)),{type:h,destroy:async()=>await n.uninstallFilter(b.idHex)}}}async function a(u,d){if(s)throw new Error("SubscriptionManager - attempting to use after destroying");const h=u.params[0],_=r[h];if(!_){d.result=!1;return}delete r[h],await _.destroy(),d.result=!0}function c(u,d){i.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:u,result:d}})}function f(){i.removeAllListeners();for(const u in r)r[u].destroy(),delete r[u];s=!0}}function jh(e){return e==null?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}export{Dh as a,No as d,Jh as j,Vh as r,Qh as s};
//# sourceMappingURL=subscriptionManager-DptUw5_8.js.map
